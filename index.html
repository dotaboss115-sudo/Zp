<!DOCTYPE html>

<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>–í–∞—Ö—Ç–∞ Live</title>
    <link href="https://fonts.googleapis.com/css2?family=Unbounded:wght@400;600;700;800&family=JetBrains+Mono:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        :root{--bg:#000;--bg2:#0a0a0a;--card:#111;--elev:#1a1a1a;--accent:#00ff88;--accent2:#00cc6a;--gold:#ffd700;--orange:#ff9500;--red:#ff453a;--blue:#0a84ff;--purple:#bf5af2;--text:#fff;--text2:rgba(255,255,255,.7);--muted:rgba(255,255,255,.4);--border:rgba(255,255,255,.1)}

```
    /* Rosneft Theme */
    [data-theme="rosneft"]{
        --bg:#1a1412;--bg2:#221a16;--card:#2a2219;--elev:#32281d;
        --accent:#ffd700;--accent2:#f4d03f;--gold:#ffd700;
        --text:#ffffff;--text2:rgba(255,255,255,.85);--muted:rgba(255,255,255,.6);
        --border:rgba(212,175,55,.15);
    }
    [data-theme="rosneft"] body{background:linear-gradient(180deg,#1a1412 0%,#120a06 100%)}
    [data-theme="rosneft"] .header{background:linear-gradient(135deg,rgba(42,34,25,.98),rgba(26,20,18,.98));backdrop-filter:blur(20px);border-bottom:1px solid rgba(212,175,55,.2)}
    [data-theme="rosneft"] .logo-icon{background:linear-gradient(135deg,#ffd700,#f4d03f);box-shadow:0 4px 20px rgba(255,215,0,.4);color:#1a1412}
    [data-theme="rosneft"] .logo-text{background:linear-gradient(135deg,#ffd700,#f4d03f);-webkit-background-clip:text;-webkit-text-fill-color:transparent}
    [data-theme="rosneft"] .badge{background:rgba(255,215,0,.2);color:#ffd700;border:1px solid rgba(255,215,0,.3)}
    [data-theme="rosneft"] .live-card{background:linear-gradient(180deg,#2a2219,#221a16);border:1px solid rgba(212,175,55,.2)}
    [data-theme="rosneft"] .live-card::before{background:linear-gradient(90deg,#ffd700,#f4d03f,#ffd700)}
    [data-theme="rosneft"] .live-dot{background:#ffd700;box-shadow:0 0 10px #ffd700}
    [data-theme="rosneft"] .live-text.on{color:#ffd700}
    [data-theme="rosneft"] .money-val{background:linear-gradient(135deg,#ffd700,#f4d03f,#ffd700);-webkit-background-clip:text;-webkit-text-fill-color:transparent}
    [data-theme="rosneft"] .money-kop,[data-theme="rosneft"] .money-cur{color:#ffd700}
    [data-theme="rosneft"] .prog-fill{background:linear-gradient(90deg,#b8941e,#ffd700,#f4d03f)}
    [data-theme="rosneft"] .prog-fill::after{background:#ffd700;box-shadow:0 0 10px #ffd700}
    [data-theme="rosneft"] .card{background:linear-gradient(135deg,#2a2219,#32281d);border:1px solid rgba(212,175,55,.15)}
    [data-theme="rosneft"] .stat3{background:#2a2219;border:1px solid rgba(212,175,55,.15)}
    [data-theme="rosneft"] .stat3-val{color:#ffd700}
    [data-theme="rosneft"] .toggle-btn.on{background:#ffd700;color:#1a1412;border-color:#ffd700}
    [data-theme="rosneft"] .bk-row.total .bk-val{color:#ffd700}
    [data-theme="rosneft"] .vahta-pct{color:#ffd700}
    [data-theme="rosneft"] .vahta-fill{background:linear-gradient(90deg,#ffd700,#f4d03f)}
    [data-theme="rosneft"] .vs-val{color:#ffd700}
    [data-theme="rosneft"] .cal-section{background:#2a2219;border:1px solid rgba(212,175,55,.15)}
    [data-theme="rosneft"] .cal-day.vm{background:rgba(255,215,0,.2);border-color:rgba(255,215,0,.4);color:#ffd700}
    [data-theme="rosneft"] .cal-day.holiday{background:rgba(255,140,0,.4);border-color:rgba(255,140,0,.7);color:#ff6600;font-weight:700;box-shadow:0 0 8px rgba(255,140,0,.4)}
    [data-theme="rosneft"] .cal-day.today{box-shadow:0 0 0 2px #ffd700,0 0 15px rgba(255,215,0,.5)}
    [data-theme="rosneft"] .bottom-nav{background:linear-gradient(to top,rgba(26,20,18,.98),rgba(34,26,22,.95));border-top:1px solid rgba(212,175,55,.2)}
    [data-theme="rosneft"] .nav-item.active{background:rgba(255,215,0,.15);color:#ffd700}
    [data-theme="rosneft"] .save-btn{background:linear-gradient(135deg,#ffd700,#f4d03f);color:#1a1412}
    [data-theme="rosneft"] .hist-amt{color:#ffd700}
    [data-theme="rosneft"] .theme-opt.active{border-color:#ffd700;background:rgba(255,215,0,.15);color:#ffd700}
    [data-theme="rosneft"] .period-btn.active{background:#ffd700;color:#1a1412}
    
    *{margin:0;padding:0;box-sizing:border-box;-webkit-tap-highlight-color:transparent}
    html,body{font-family:'Unbounded',sans-serif;background:var(--bg);color:var(--text);min-height:100vh;transition:background .5s ease,color .3s ease}
    body{padding-bottom:calc(85px + env(safe-area-inset-bottom))}
    
    .header{position:sticky;top:0;z-index:50;background:rgba(0,0,0,.9);backdrop-filter:blur(20px);padding:12px 16px;padding-top:calc(12px + env(safe-area-inset-top));border-bottom:1px solid var(--border);display:flex;justify-content:space-between;align-items:center;transition:all .5s ease}
    .logo{display:flex;align-items:center;gap:10px}
    .logo-icon{width:36px;height:36px;background:linear-gradient(135deg,var(--accent),var(--accent2));border-radius:10px;display:flex;align-items:center;justify-content:center;font-size:1.1rem;transition:all .5s ease,transform .2s ease}
    .logo-icon:active{transform:scale(.9) rotate(5deg)}
    .logo-text{font-size:1.2rem;font-weight:700;background:linear-gradient(135deg,var(--accent),var(--accent2));-webkit-background-clip:text;-webkit-text-fill-color:transparent;transition:all .5s ease}
    .badge{font-size:.6rem;padding:4px 8px;background:rgba(0,255,136,.15);color:var(--accent);border-radius:6px;font-weight:600;transition:all .3s ease;animation:badgePulse 2s ease-in-out infinite}
    @keyframes badgePulse{0%,100%{transform:scale(1)}50%{transform:scale(1.05)}}
    .theme-btn{width:36px;height:36px;border-radius:10px;background:var(--card);border:1px solid var(--border);display:flex;align-items:center;justify-content:center;font-size:1.1rem;cursor:pointer;transition:all .3s ease}
    .theme-btn:active{transform:scale(.85) rotate(180deg)}
    .container{padding:16px;animation:fadeIn .5s ease}
    @keyframes fadeIn{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}
    @keyframes fadeOut{from{opacity:1}to{opacity:0}}

    .live-card{background:linear-gradient(180deg,var(--card),var(--bg2));border-radius:24px;padding:24px;margin-bottom:16px;border:1px solid var(--border);position:relative;overflow:hidden;transition:all .5s ease;animation:slideUp .6s ease}
    @keyframes slideUp{from{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}
    .live-card::before{content:'';position:absolute;top:0;left:0;right:0;height:2px;background:linear-gradient(90deg,var(--accent),var(--gold),var(--accent));background-size:200%;animation:grad 3s linear infinite}
    @keyframes grad{0%{background-position:0}100%{background-position:200%}}
    
    .live-status{display:flex;align-items:center;gap:8px;margin-bottom:16px;animation:fadeIn .7s ease .1s backwards}
    .live-dot{width:10px;height:10px;border-radius:50%;background:var(--accent);box-shadow:0 0 10px var(--accent);animation:pulse 1.5s ease-in-out infinite}
    @keyframes pulse{0%,100%{transform:scale(1);opacity:1}50%{transform:scale(1.2);opacity:.7}}
    .live-dot.off{background:var(--orange);box-shadow:none;animation:none}
    .live-dot.holiday{background:var(--gold)}
    .live-dot.road{background:var(--blue)}
    .live-text{font-size:.75rem;font-weight:600;text-transform:uppercase;letter-spacing:1px;transition:color .3s ease}
    .live-text.on{color:var(--accent)}.live-text.off{color:var(--orange)}.live-text.holiday{color:var(--gold)}.live-text.road{color:var(--blue)}
    .live-time{margin-left:auto;font-family:'JetBrains Mono',monospace;font-size:.8rem;color:var(--muted)}
    
    .money{text-align:center;margin-bottom:20px;animation:fadeIn .8s ease .2s backwards}
    .money-label{font-size:.8rem;color:var(--muted);margin-bottom:8px}
    .money-amount{font-family:'JetBrains Mono',monospace;font-size:3.2rem;font-weight:700;display:flex;align-items:baseline;justify-content:center;gap:4px;transition:all .3s ease}
    .money-val{background:linear-gradient(135deg,var(--accent),#0fa,var(--accent));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-size:200%;animation:shine 3s linear infinite}
    @keyframes shine{0%{background-position:0}100%{background-position:200%}}
    .money-kop{font-size:1.2rem;color:var(--accent2);opacity:.7;transition:all .3s ease}
    .money-cur{font-size:1.5rem;color:var(--accent2);transition:all .3s ease}
    .money-ps{font-size:.75rem;color:var(--muted);margin-top:8px;transition:all .3s ease}
    .money-ps span{color:var(--accent);font-weight:600}
    
    .shift-prog{margin-top:20px;animation:fadeIn .9s ease .3s backwards}
    .shift-head{display:flex;justify-content:space-between;margin-bottom:8px;font-size:.75rem}
    .shift-head span:last-child{color:var(--accent);font-family:'JetBrains Mono',monospace}
    .prog-track{height:6px;background:var(--bg);border-radius:10px;overflow:hidden}
    .prog-fill{height:100%;background:linear-gradient(90deg,var(--accent),var(--gold));border-radius:10px;transition:width 1s ease;position:relative}
    .prog-fill::after{content:'';position:absolute;right:0;top:50%;transform:translateY(-50%);width:12px;height:12px;background:var(--accent);border-radius:50%;box-shadow:0 0 10px var(--accent);transition:all .3s ease}
    .shift-labels{display:flex;justify-content:space-between;margin-top:6px;font-size:.65rem;color:var(--muted)}
    
    .stats3{display:grid;grid-template-columns:repeat(3,1fr);gap:10px;margin-bottom:16px;animation:fadeIn .7s ease .2s backwards}
    .stat3{background:var(--card);border-radius:16px;padding:14px 12px;text-align:center;border:1px solid var(--border);transition:all .3s ease,transform .2s ease}
    .stat3:active{transform:scale(.95)}
    .stat3-val{font-family:'JetBrains Mono',monospace;font-size:1.1rem;font-weight:700;margin-bottom:4px;transition:all .3s ease}
    .stat3-lbl{font-size:.6rem;color:var(--muted);text-transform:uppercase}
    
    .card{background:var(--card);border-radius:20px;padding:20px;margin-bottom:16px;border:1px solid var(--border);transition:all .5s ease;animation:fadeIn .8s ease .3s backwards}
    .card-head{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}
    .card-title{font-size:.9rem;font-weight:600}
    .toggle-wrap{display:flex;gap:8px}
    .toggle-btn{padding:6px 12px;border-radius:8px;font-size:.7rem;font-weight:600;border:1px solid var(--border);background:var(--bg2);color:var(--muted);cursor:pointer;transition:all .3s ease}
    .toggle-btn:active{transform:scale(.9)}
    .toggle-btn.on{background:var(--accent);color:var(--bg);border-color:var(--accent)}
    
    .bk-row{display:flex;justify-content:space-between;align-items:center;padding:10px 12px;background:var(--bg2);border-radius:10px;margin-bottom:6px;font-size:.75rem;transition:all .3s ease;animation:fadeIn .3s ease backwards}
    .bk-row:nth-child(1){animation-delay:.1s}
    .bk-row:nth-child(2){animation-delay:.15s}
    .bk-row:nth-child(3){animation-delay:.2s}
    .bk-row:nth-child(4){animation-delay:.25s}
    .bk-row:nth-child(5){animation-delay:.3s}
    .bk-row:nth-child(6){animation-delay:.35s}
    .bk-row:nth-child(7){animation-delay:.4s}
    .bk-row:nth-child(8){animation-delay:.45s}
    .bk-row:nth-child(9){animation-delay:.5s}
    .bk-row:nth-child(10){animation-delay:.55s}
    .bk-row.hl{background:rgba(0,255,136,.1);border:1px solid rgba(0,255,136,.3)}
    .bk-row.total{background:linear-gradient(135deg,rgba(0,255,136,.1),rgba(255,215,0,.1));border:1px solid var(--accent);margin-top:8px}
    .bk-lbl{color:var(--text2);display:flex;align-items:center;gap:6px}
    .bk-pct{font-size:.6rem;padding:2px 6px;background:var(--elev);border-radius:4px;color:var(--muted)}
    .bk-val{font-family:'JetBrains Mono',monospace;font-weight:600;transition:all .3s ease}
    .bk-row.total .bk-lbl{color:var(--text);font-weight:600}
    .bk-row.total .bk-val{color:var(--accent);font-size:1rem}
    
    .vahta-head{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:16px}
    .vahta-info h3{font-size:.9rem;margin-bottom:4px}
    .vahta-dates{font-size:.7rem;color:var(--muted)}
    .vahta-pct{font-family:'JetBrains Mono',monospace;font-size:1.8rem;font-weight:700;color:var(--accent);transition:all .3s ease}
    .vahta-prog{height:8px;background:var(--bg);border-radius:10px;overflow:hidden;margin-bottom:12px}
    .vahta-fill{height:100%;background:linear-gradient(90deg,var(--accent),var(--blue));border-radius:10px;transition:width .8s ease}
    .vahta-stats{display:grid;grid-template-columns:repeat(4,1fr);gap:8px}
    .vs{text-align:center;padding:10px 6px;background:var(--bg2);border-radius:10px;transition:all .3s ease}
    .vs:active{transform:scale(.95)}
    .vs-val{font-family:'JetBrains Mono',monospace;font-size:1rem;font-weight:700;margin-bottom:2px;transition:all .3s ease}
    .vs-lbl{font-size:.55rem;color:var(--muted);text-transform:uppercase}
    
    .cal-section{background:var(--card);border-radius:20px;padding:16px;margin-bottom:16px;border:1px solid var(--border);transition:all .5s ease}
    .cal-head{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}
    .cal-btn{width:32px;height:32px;border-radius:8px;background:var(--bg2);border:1px solid var(--border);color:var(--text);font-size:1rem;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .2s ease}
    .cal-btn:active{background:var(--accent);color:var(--bg);transform:scale(.85)}
    .cal-title{font-size:.95rem;font-weight:600}
    .cal-wdays{display:grid;grid-template-columns:repeat(7,1fr);margin-bottom:8px}
    .cal-wd{text-align:center;font-size:.6rem;color:var(--muted);padding:8px 0;font-weight:500}
    .cal-grid{display:grid;grid-template-columns:repeat(7,1fr);gap:4px}
    .cal-day{aspect-ratio:1;display:flex;flex-direction:column;align-items:center;justify-content:center;border-radius:8px;font-size:.8rem;font-weight:500;cursor:pointer;background:var(--bg2);border:2px solid transparent;transition:all .2s ease;position:relative}
    .cal-day:active{transform:scale(.9)}
    .cal-day.empty{background:transparent;pointer-events:none}
    .cal-day.vm{background:rgba(0,255,136,.15);border-color:rgba(0,255,136,.3);color:var(--accent)}
    .cal-day.vo{background:rgba(255,69,58,.1);border-color:rgba(255,69,58,.2);color:var(--red)}
    .cal-day.road{background:rgba(10,132,255,.15);border-color:rgba(10,132,255,.3);color:var(--blue)}
    .cal-day.vacation{background:rgba(191,90,242,.15);border-color:rgba(191,90,242,.3);color:var(--purple)}
    .cal-day.holiday{background:rgba(255,215,0,.35);border-color:rgba(255,215,0,.6);color:#ff8800;font-weight:700;box-shadow:0 0 8px rgba(255,215,0,.3)}
    .cal-day.hospital{background:rgba(255,149,0,.15);border-color:rgba(255,149,0,.3);color:var(--orange)}
    .cal-day.today{box-shadow:0 0 0 2px var(--gold),0 0 15px rgba(255,215,0,.4);animation:todayPulse 2s ease-in-out infinite}
    @keyframes todayPulse{0%,100%{box-shadow:0 0 0 2px var(--gold),0 0 15px rgba(255,215,0,.4)}50%{box-shadow:0 0 0 2px var(--gold),0 0 20px rgba(255,215,0,.6)}}
    .cal-day.past{opacity:.5}
    .cal-day-num{font-size:.85rem;line-height:1}
    .cal-day-lbl{font-size:.4rem;margin-top:1px;text-transform:uppercase;opacity:.9}
    .cal-legend{display:flex;flex-wrap:wrap;gap:10px;margin-top:12px;padding-top:12px;border-top:1px solid var(--border)}
    .leg-item{display:flex;align-items:center;gap:4px;font-size:.6rem;color:var(--muted)}
    .leg-dot{width:8px;height:8px;border-radius:3px}
    
    .edit-overlay{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.9);backdrop-filter:blur(10px);z-index:100;display:none;align-items:flex-end;transition:all .3s ease}
    .edit-overlay.show{display:flex;animation:overlayFadeIn .3s ease}
    @keyframes overlayFadeIn{from{opacity:0}to{opacity:1}}
    .edit-panel{width:100%;background:var(--card);border-radius:24px 24px 0 0;padding:24px;padding-bottom:calc(24px + env(safe-area-inset-bottom));animation:slideUp .4s ease}
    .edit-head{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}
    .edit-title{font-size:1rem}
    .edit-close{width:32px;height:32px;border-radius:50%;background:var(--bg2);border:none;color:var(--text2);font-size:1.2rem;cursor:pointer;transition:all .2s ease}
    .edit-close:active{transform:scale(.85) rotate(90deg)}
    .edit-date{font-size:.8rem;color:var(--muted);margin-bottom:16px}
    .edit-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:10px}
    .edit-btn{padding:16px 10px;border-radius:14px;border:2px solid var(--border);background:var(--bg2);color:var(--text2);font-size:.7rem;font-weight:600;cursor:pointer;display:flex;flex-direction:column;align-items:center;gap:6px;font-family:'Unbounded',sans-serif;transition:all .2s ease}
    .edit-btn:active{transform:scale(.9)}
    .edit-btn.vm{border-color:var(--accent);color:var(--accent)}
    .edit-btn.road{border-color:var(--blue);color:var(--blue)}
    .edit-btn.vo{border-color:var(--red);color:var(--red)}
    .edit-btn.vacation{border-color:var(--purple);color:var(--purple)}
    .edit-btn.holiday{border-color:var(--gold);color:var(--gold)}
    .edit-btn.hospital{border-color:var(--orange);color:var(--orange)}
    .edit-icon{font-size:1.4rem}
    
    .bottom-nav{position:fixed;bottom:0;left:0;right:0;background:rgba(10,10,10,.95);backdrop-filter:blur(20px);border-top:1px solid var(--border);padding:8px 10px;padding-bottom:calc(8px + env(safe-area-inset-bottom));display:flex;justify-content:space-around;z-index:50;transition:all .5s ease}
    .nav-item{display:flex;flex-direction:column;align-items:center;gap:4px;padding:8px 12px;border-radius:12px;color:var(--muted);font-size:.5rem;cursor:pointer;transition:all .3s ease}
    .nav-item:active{transform:scale(.9)}
    .nav-item.active{color:var(--accent);background:rgba(0,255,136,.1)}
    .nav-icon{font-size:1.1rem;transition:all .3s ease}
    .nav-item.active .nav-icon{transform:scale(1.1)}
    
    .tab-content{display:none;opacity:0;transition:opacity .5s ease}
    .tab-content.active{display:block;opacity:1;animation:fadeIn .5s ease}
    
    .set-section{margin-bottom:24px;animation:fadeIn .5s ease backwards}
    .set-section:nth-child(1){animation-delay:.1s}
    .set-section:nth-child(2){animation-delay:.2s}
    .set-section:nth-child(3){animation-delay:.3s}
    .set-section:nth-child(4){animation-delay:.4s}
    .set-section:nth-child(5){animation-delay:.5s}
    .set-title{font-size:.8rem;color:var(--muted);margin-bottom:12px;padding-left:4px}
    .set-row{display:flex;justify-content:space-between;align-items:center;padding:14px 16px;background:var(--card);border:1px solid var(--border);border-radius:12px;margin-bottom:8px;transition:all .3s ease}
    .set-row:active{transform:scale(.98)}
    .set-lbl{font-size:.8rem}
    .set-input{width:100px;padding:10px 12px;border-radius:8px;background:var(--bg);border:1px solid var(--border);color:var(--text);font-family:'JetBrains Mono',monospace;font-size:.9rem;text-align:right;outline:none;transition:all .3s ease}
    .set-input:focus{border-color:var(--accent);box-shadow:0 0 0 3px rgba(0,255,136,.1)}
    .save-btn{width:100%;padding:16px;border-radius:14px;background:linear-gradient(135deg,var(--accent),var(--accent2));border:none;color:var(--bg);font-size:.9rem;font-weight:700;cursor:pointer;font-family:'Unbounded',sans-serif;margin-top:16px;transition:all .3s ease}
    .save-btn:active{transform:scale(.95)}
    
    .theme-selector{display:flex;gap:8px;padding:16px;background:var(--card);border-radius:12px;margin-bottom:16px;border:1px solid var(--border);transition:all .3s ease}
    .theme-opt{flex:1;padding:12px 8px;border-radius:10px;background:var(--bg2);border:2px solid var(--border);color:var(--text2);font-size:.7rem;font-weight:600;cursor:pointer;text-align:center;font-family:'Unbounded',sans-serif;transition:all .3s ease}
    .theme-opt:active{transform:scale(.95)}
    .theme-opt.active{border-color:var(--accent);background:rgba(0,255,136,.1);color:var(--accent)}
    
    .hist-item{display:flex;justify-content:space-between;align-items:center;padding:14px 16px;background:var(--card);border:1px solid var(--border);border-radius:12px;margin-bottom:8px;transition:all .3s ease;animation:fadeIn .3s ease backwards}
    .hist-item:nth-child(1){animation-delay:.1s}
    .hist-item:nth-child(2){animation-delay:.15s}
    .hist-item:nth-child(3){animation-delay:.2s}
    .hist-item:nth-child(4){animation-delay:.25s}
    .hist-item:nth-child(5){animation-delay:.3s}
    .hist-item:active{transform:scale(.98)}
    .hist-date{font-size:.8rem;font-weight:500}
    .hist-meta{font-size:.65rem;color:var(--muted)}
    .hist-amt{font-family:'JetBrains Mono',monospace;font-size:1rem;font-weight:700;color:var(--accent);transition:all .3s ease}
    .hist-amt.road{color:var(--blue)}.hist-amt.holiday{color:var(--gold)}
    
    .period-sel{display:flex;gap:8px;overflow-x:auto;padding:4px 0;margin-bottom:16px}
    .period-sel::-webkit-scrollbar{display:none}
    .period-btn{flex-shrink:0;padding:10px 14px;border-radius:10px;background:var(--card);border:1px solid var(--border);color:var(--text2);font-size:.7rem;font-weight:500;cursor:pointer;font-family:'Unbounded',sans-serif;transition:all .3s ease}
    .period-btn:active{transform:scale(.95)}
    .period-btn.active{background:var(--accent);color:var(--bg);border-color:var(--accent)}
    
    .toast{position:fixed;bottom:calc(100px + env(safe-area-inset-bottom));left:50%;transform:translateX(-50%) translateY(100px);background:var(--elev);border:1px solid var(--accent);border-radius:12px;padding:12px 20px;font-size:.8rem;z-index:200;opacity:0;transition:all .3s ease;box-shadow:0 4px 20px rgba(0,0,0,.5)}
    .toast.show{transform:translateX(-50%) translateY(0);opacity:1}
    
    .save-indicator{position:fixed;top:calc(60px + env(safe-area-inset-top) + 10px);right:16px;background:var(--card);border:1px solid var(--accent);border-radius:8px;padding:6px 12px;font-size:.65rem;color:var(--accent);opacity:0;transition:all .3s ease;pointer-events:none;z-index:60}
    .save-indicator.show{opacity:1;animation:saveFlash .5s ease}
    @keyframes saveFlash{0%,100%{opacity:1}50%{opacity:.7}}
    
    .offline-badge{position:fixed;top:calc(60px + env(safe-area-inset-top) + 10px);left:16px;background:#ff453a;color:#fff;border-radius:8px;padding:6px 12px;font-size:.65rem;font-weight:600;opacity:0;transition:all .3s ease;pointer-events:none;z-index:60}
    .offline-badge.show{opacity:1}
    
    .login-screen{position:fixed;top:0;left:0;right:0;bottom:0;z-index:1000;display:flex;align-items:center;justify-content:center;background:var(--bg)}
    .login-container{position:relative;z-index:2;width:90%;max-width:400px;animation:fadeIn .8s ease}
    .login-logo{text-align:center;margin-bottom:40px}
    .login-logo-icon{width:80px;height:80px;margin:0 auto 20px;background:linear-gradient(135deg,var(--accent),var(--accent2));border-radius:20px;display:flex;align-items:center;justify-content:center;font-size:3rem;box-shadow:0 10px 40px rgba(0,255,136,.3);animation:pulse 2s ease-in-out infinite}
    .login-title{font-size:2rem;font-weight:800;margin-bottom:8px;background:linear-gradient(135deg,var(--accent),var(--gold));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
    .login-subtitle{font-size:.8rem;color:var(--muted);font-weight:500}
    .login-form{background:var(--card);border-radius:24px;padding:32px;border:1px solid var(--border);box-shadow:0 20px 60px rgba(0,0,0,.5)}
    .login-user-card{display:flex;align-items:center;gap:16px;padding:16px;background:var(--bg2);border-radius:16px;margin-bottom:24px;border:1px solid var(--border)}
    .login-avatar{width:60px;height:60px;border-radius:50%;background:linear-gradient(135deg,var(--accent),var(--accent2));display:flex;align-items:center;justify-content:center;font-size:2rem;border:3px solid var(--border)}
    .login-user-info{flex:1}
    .login-user-name{font-size:1rem;font-weight:700;margin-bottom:4px}
    .login-user-position{font-size:.7rem;color:var(--muted)}
    .input-group{position:relative;margin-bottom:20px}
    .input-icon{position:absolute;left:16px;top:50%;transform:translateY(-50%);font-size:1.2rem;opacity:.5}
    .login-input{width:100%;padding:16px 16px 16px 48px;background:var(--bg2);border:2px solid var(--border);border-radius:14px;color:var(--text);font-size:1.1rem;font-family:'JetBrains Mono',monospace;font-weight:600;letter-spacing:4px;text-align:center;outline:none;transition:all .3s ease}
    .login-input:focus{border-color:var(--accent);box-shadow:0 0 0 4px rgba(0,255,136,.1);background:var(--card)}
    .login-input::placeholder{letter-spacing:normal;font-family:'Unbounded',sans-serif;font-weight:400;font-size:.8rem}
    .login-btn{width:100%;padding:18px;background:linear-gradient(135deg,var(--accent),var(--accent2));border:none;border-radius:14px;color:var(--bg);font-size:1rem;font-weight:700;cursor:pointer;font-family:'Unbounded',sans-serif;display:flex;align-items:center;justify-content:center;gap:10px;transition:all .3s ease;box-shadow:0 4px 20px rgba(0,255,136,.3)}
    .login-btn:hover{transform:translateY(-2px);box-shadow:0 6px 30px rgba(0,255,136,.4)}
    .login-btn:active{transform:translateY(0);box-shadow:0 2px 10px rgba(0,255,136,.3)}
    .login-btn-icon{font-size:1.4rem;transition:transform .3s ease}
    .login-btn:hover .login-btn-icon{transform:translateX(4px)}
    .login-error{color:var(--red);font-size:.8rem;text-align:center;margin-top:12px;opacity:0;transition:opacity .3s ease;font-weight:600}
    .login-error.show{opacity:1;animation:shake .5s ease}
    @keyframes shake{0%,100%{transform:translateX(0)}25%{transform:translateX(-10px)}75%{transform:translateX(10px)}}
    .login-footer{display:flex;justify-content:space-between;align-items:center;margin-top:24px;padding-top:20px;border-top:1px solid var(--border)}
    .login-hint{font-size:.7rem;color:var(--accent);display:flex;align-items:center;gap:6px}
    .login-version{font-size:.65rem;color:var(--muted)}
    .login-bg{position:absolute;top:0;left:0;right:0;bottom:0;overflow:hidden;opacity:.1}
    .login-bg-pattern{width:200%;height:200%;background:repeating-linear-gradient(45deg,var(--accent) 0px,var(--accent) 10px,transparent 10px,transparent 20px);animation:bgScroll 20s linear infinite}
    @keyframes bgScroll{0%{transform:translate(0,0)}100%{transform:translate(-50%,-50%)}}
    
    [data-theme="rosneft"] .login-logo-icon{background:linear-gradient(135deg,#ffd700,#f4d03f);box-shadow:0 10px 40px rgba(255,215,0,.3)}
    [data-theme="rosneft"] .login-title{background:linear-gradient(135deg,#ffd700,#f4d03f);-webkit-background-clip:text;-webkit-text-fill-color:transparent}
    [data-theme="rosneft"] .login-avatar{background:linear-gradient(135deg,#ffd700,#f4d03f)}
    [data-theme="rosneft"] .login-btn{background:linear-gradient(135deg,#ffd700,#f4d03f);color:#1a1412;box-shadow:0 4px 20px rgba(255,215,0,.3)}
    [data-theme="rosneft"] .login-btn:hover{box-shadow:0 6px 30px rgba(255,215,0,.4)}
    [data-theme="rosneft"] .login-hint{color:#ffd700}
    
    .profile-header{display:flex;align-items:center;gap:20px;padding:24px;background:var(--card);border-radius:20px;margin-bottom:16px;border:1px solid var(--border);animation:slideUp .6s ease}
    .photo-wrapper{position:relative}
    .photo{width:100px;height:100px;border-radius:50%;background:var(--bg2);border:3px solid var(--border);overflow:hidden;transition:all .3s ease;cursor:pointer;display:flex;align-items:center;justify-content:center}
    .photo:active{transform:scale(.95)}
    .photo-placeholder{font-size:3rem;opacity:.5}
    .photo-edit{position:absolute;bottom:0;right:0;width:32px;height:32px;border-radius:50%;background:var(--accent);border:2px solid var(--card);font-size:.9rem;cursor:pointer;transition:all .2s ease}
    .photo-edit:active{transform:scale(.9)}
    .profile-info{flex:1}
    .profile-name{font-size:1.4rem;font-weight:700;margin-bottom:4px}
    .profile-position{font-size:.8rem;color:var(--text2);margin-bottom:2px}
    .profile-company{font-size:.7rem;color:var(--muted)}
    
    .work-info{display:flex;flex-direction:column;gap:10px}
    .work-row{display:flex;justify-content:space-between;align-items:center;padding:10px 12px;background:var(--bg2);border-radius:10px}
    .work-label{font-size:.75rem;color:var(--muted)}
    .work-value{font-size:.8rem;font-weight:600;color:var(--text);text-align:right}
    .edit-mini-btn{width:32px;height:32px;border-radius:8px;background:var(--bg2);border:1px solid var(--border);font-size:.9rem;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;justify-content:center}
    .edit-mini-btn:active{transform:scale(.9);background:var(--accent);border-color:var(--accent)}
    
    .motto-text{padding:16px;background:var(--bg2);border-radius:12px;font-size:.9rem;color:var(--text2);font-style:italic;text-align:center;line-height:1.5;border-left:3px solid var(--accent)}
    
    .color-picker-wrap{padding:12px}
    .color-options{display:grid;grid-template-columns:repeat(8,1fr);gap:10px;margin-bottom:12px}
    .color-opt{aspect-ratio:1;border-radius:10px;cursor:pointer;transition:all .2s ease;border:3px solid transparent;position:relative}
    .color-opt:active{transform:scale(.9)}
    .color-opt.active{border-color:#fff;box-shadow:0 0 10px currentColor}
    .color-opt.active::after{content:'‚úì';position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);color:#fff;font-size:1.2rem;font-weight:700;text-shadow:0 0 3px #000}
    .custom-color-input{width:100%;height:50px;border-radius:12px;border:2px solid var(--border);background:var(--bg2);cursor:pointer;transition:all .2s ease}
    .custom-color-input:active{transform:scale(.98)}
    
    .stats-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:10px;margin-bottom:16px;animation:fadeIn .7s ease .1s backwards}
    .stat-card{background:var(--card);border-radius:16px;padding:16px;text-align:center;border:1px solid var(--border);transition:all .3s ease}
    .stat-card:active{transform:scale(.98)}
    .stat-icon{font-size:2rem;margin-bottom:8px}
    .stat-value{font-family:'JetBrains Mono',monospace;font-size:1.3rem;font-weight:700;color:var(--accent);margin-bottom:4px}
    .stat-label{font-size:.65rem;color:var(--muted);text-transform:uppercase}
    
    .month-row{display:flex;justify-content:space-between;align-items:center;padding:12px;background:var(--bg2);border-radius:10px;transition:all .3s ease;cursor:pointer}
    .month-row:active{transform:scale(.98)}
    .month-name{font-size:.75rem;font-weight:600}
    .month-amount{font-family:'JetBrains Mono',monospace;font-size:.9rem;font-weight:700;color:var(--accent)}
    
    .quick-actions{display:grid;grid-template-columns:1fr;gap:10px}
    .action-btn{padding:14px;border-radius:12px;background:var(--bg2);border:1px solid var(--border);color:var(--text);font-size:.8rem;font-weight:600;cursor:pointer;font-family:'Unbounded',sans-serif;transition:all .3s ease;display:flex;align-items:center;justify-content:center;gap:8px}
    .action-btn:active{transform:scale(.98);background:var(--accent);color:var(--bg);border-color:var(--accent)}
</style>
```

</head>
<body data-theme="dark">
    <header class="header" id="mainHeader" style="display:none">
        <div class="logo">
            <div class="logo-icon">‚õèÔ∏è</div>
            <span class="logo-text">–í–∞—Ö—Ç–∞ Live</span>
        </div>
        <div style="display:flex;gap:8px;align-items:center">
            <span class="badge" id="badge">LIVE</span>
            <div class="theme-btn" id="themeBtn">üé®</div>
        </div>
    </header>

```
<div class="save-indicator" id="saveInd">üíæ –°–æ—Ö—Ä–∞–Ω–µ–Ω–æ</div>
<div class="offline-badge" id="offlineBadge">üìµ –û—Ñ–ª–∞–π–Ω —Ä–µ–∂–∏–º</div>

<!-- Login Screen -->
<div class="login-screen" id="loginScreen">
    <div class="login-container">
        <div class="login-logo">
            <div class="login-logo-icon">‚õèÔ∏è</div>
            <h1 class="login-title">–í–∞—Ö—Ç–∞ Live</h1>
            <p class="login-subtitle">–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π —É—á—ë—Ç –≤–∞—Ö—Ç–æ–≤–æ–π —Ä–∞–±–æ—Ç—ã</p>
        </div>
        <div class="login-form">
            <div class="login-user-card">
                <div class="login-avatar">üë§</div>
                <div class="login-user-info">
                    <div class="login-user-name">–ò–≤–∞–Ω–æ–≤ –î–º–∏—Ç—Ä–∏–π</div>
                    <div class="login-user-position">–¢–µ—Ö–Ω–∏–∫ ‚Ä¢ –°–ò–ë–ò–ù–¢–ï–ö</div>
                </div>
            </div>
            <div class="input-group">
                <div class="input-icon">üîí</div>
                <input 
                    type="password" 
                    id="loginPassword" 
                    class="login-input" 
                    placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å"
                    maxlength="5"
                    inputmode="numeric"
                    autocomplete="off"
                >
            </div>
            <button class="login-btn" id="loginBtn">
                <span class="login-btn-text">–í–æ–π—Ç–∏</span>
                <span class="login-btn-icon">‚Üí</span>
            </button>
            <div class="login-error" id="loginError">–ù–µ–≤–µ—Ä–Ω—ã–π –ø–∞—Ä–æ–ª—å</div>
            <div class="login-footer">
                <div class="login-hint">üîê –ó–∞—â–∏—â—ë–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø</div>
                <div class="login-version">v2.0 ‚Ä¢ 2025</div>
            </div>
        </div>
    </div>
    <div class="login-bg">
        <div class="login-bg-pattern"></div>
    </div>
</div>

<div class="container" id="mainApp" style="display:none">
    <div id="tab-dash" class="tab-content active">
        <div class="live-card">
            <div class="live-status">
                <div class="live-dot" id="liveDot"></div>
                <span class="live-text on" id="liveTxt">–°–ú–ï–ù–ê –ò–î–Å–¢</span>
                <span class="live-time" id="liveTime">12:34:56</span>
            </div>
            <div class="money">
                <div class="money-label">–ó–∞—Ä–∞–±–æ—Ç–∞–Ω–æ –∑–∞ –≤–∞—Ö—Ç—É</div>
                <div class="money-amount">
                    <span class="money-val" id="moneyRub">0</span>
                    <span class="money-kop" id="moneyKop">.00</span>
                    <span class="money-cur">‚ÇΩ</span>
                </div>
                <div class="money-ps" id="moneyPs">+<span id="perSec">0.00</span>‚ÇΩ/—Å–µ–∫</div>
            </div>
            <div class="shift-prog" id="shiftProg">
                <div class="shift-head">
                    <span>–ü—Ä–æ–≥—Ä–µ—Å—Å —Å–º–µ–Ω—ã</span>
                    <span id="shiftHrs">0.0 / 11 —á</span>
                </div>
                <div class="prog-track"><div class="prog-fill" id="shiftFill" style="width:0%"></div></div>
                <div class="shift-labels"><span>08:00</span><span>–û–±–µ–¥</span><span>20:00</span></div>
            </div>
        </div>

        <div class="stats3">
            <div class="stat3"><div class="stat3-val" style="color:var(--accent)" id="qsToday">0‚ÇΩ</div><div class="stat3-lbl">–°–µ–≥–æ–¥–Ω—è</div></div>
            <div class="stat3"><div class="stat3-val" style="color:var(--gold)" id="qsHrs">0—á</div><div class="stat3-lbl">–ß–∞—Å–æ–≤</div></div>
            <div class="stat3"><div class="stat3-val" style="color:var(--blue)" id="qsDays">0</div><div class="stat3-lbl">–î–Ω–µ–π</div></div>
        </div>

        <div class="card">
            <div class="card-head">
                <span class="card-title">üíµ –ó–∞ –¥–µ–Ω—å</span>
                <div class="toggle-wrap">
                    <button class="toggle-btn on" id="tgBonus">–° –ø—Ä–µ–º–∏–µ–π</button>
                    <button class="toggle-btn" id="tgNoBonus">–ë–µ–∑</button>
                </div>
            </div>
            <div id="dayBk"></div>
        </div>

        <div class="card">
            <div class="vahta-head">
                <div class="vahta-info"><h3>üìÖ –ü—Ä–æ–≥—Ä–µ—Å—Å –≤–∞—Ö—Ç—ã</h3><div class="vahta-dates" id="vDates">-</div></div>
                <div class="vahta-pct" id="vPct">0%</div>
            </div>
            <div class="vahta-prog"><div class="vahta-fill" id="vFill" style="width:0%"></div></div>
            <div class="vahta-stats">
                <div class="vs"><div class="vs-val" style="color:var(--accent)" id="vsWork">0</div><div class="vs-lbl">–†–∞–±.</div></div>
                <div class="vs"><div class="vs-val" style="color:var(--blue)" id="vsRoad">0</div><div class="vs-lbl">–î–æ—Ä–æ–≥–∞</div></div>
                <div class="vs"><div class="vs-val" style="color:var(--gold)" id="vsHol">0</div><div class="vs-lbl">–ü—Ä–∞–∑–¥.</div></div>
                <div class="vs"><div class="vs-val" style="color:var(--orange)" id="vsLeft">0</div><div class="vs-lbl">–û—Å—Ç–∞–ª.</div></div>
            </div>
        </div>
    </div>

    <!-- Profile -->
    <div id="tab-profile" class="tab-content">
        <div class="profile-header">
            <div class="photo-wrapper">
                <div class="photo" id="photo">
                    <img id="photoImg" style="display:none;width:100%;height:100%;object-fit:cover;border-radius:50%">
                    <div id="photoPlaceholder" class="photo-placeholder">üì∏</div>
                </div>
                <input type="file" id="photoInput" accept="image/*" style="display:none">
                <button class="photo-edit" id="photoEdit">üì∑</button>
            </div>
            <div class="profile-info">
                <h2 class="profile-name" id="profileName">–ò–≤–∞–Ω–æ–≤ –î–º–∏—Ç—Ä–∏–π –í—è—á–µ—Å–ª–∞–≤–æ–≤–∏—á</h2>
                <div class="profile-position" id="profilePosition">–¢–µ—Ö–Ω–∏–∫</div>
                <div class="profile-company" id="profileCompany">–û–û–û –ò–ö –°–ò–ë–ò–ù–¢–ï–ö</div>
            </div>
        </div>

        <div class="card">
            <div class="card-head">
                <span class="card-title">üè¢ –ú–µ—Å—Ç–æ —Ä–∞–±–æ—Ç—ã</span>
                <button class="edit-mini-btn" id="editWork">‚úèÔ∏è</button>
            </div>
            <div class="work-info">
                <div class="work-row">
                    <span class="work-label">–ö–æ–º–ø–∞–Ω–∏—è:</span>
                    <span class="work-value" id="workCompany">–û–û–û –ò–ö –°–ò–ë–ò–ù–¢–ï–ö</span>
                </div>
                <div class="work-row">
                    <span class="work-label">–§–∏–ª–∏–∞–ª:</span>
                    <span class="work-value" id="workField">–ú–∞–∫—Ä–æ—Ä–µ–≥–∏–æ–Ω –í–æ—Å—Ç–æ—á–Ω–∞—è –°–∏–±–∏—Ä—å</span>
                </div>
                <div class="work-row">
                    <span class="work-label">–£—á–∞—Å—Ç–æ–∫:</span>
                    <span class="work-value" id="workSite">–£—á–∞—Å—Ç–æ–∫ –º–µ—Ç—Ä–æ–ª–æ–≥–∏–∏</span>
                </div>
                <div class="work-row">
                    <span class="work-label">–î–æ–ª–∂–Ω–æ—Å—Ç—å:</span>
                    <span class="work-value" id="workPosition">–¢–µ—Ö–Ω–∏–∫</span>
                </div>
                <div class="work-row">
                    <span class="work-label">–û–ø—ã—Ç —Ä–∞–±–æ—Ç—ã:</span>
                    <span class="work-value" id="workExp">3 –≥–æ–¥–∞</span>
                </div>
                <div class="work-row">
                    <span class="work-label">–¢–∞–±–µ–ª—å–Ω—ã–π –Ω–æ–º–µ—Ä:</span>
                    <span class="work-value" id="workTabNum">–≥000-42454</span>
                </div>
            </div>
        </div>

        <div class="card">
            <div class="card-head">
                <span class="card-title">üí≠ –î–µ–≤–∏–∑</span>
                <button class="edit-mini-btn" id="editMotto">‚úèÔ∏è</button>
            </div>
            <div class="motto-text" id="mottoText">–¢–æ—á–Ω–æ—Å—Ç—å ‚Äî –∑–∞–ª–æ–≥ —É—Å–ø–µ—Ö–∞!</div>
        </div>

        <div class="card">
            <div class="card-head">
                <span class="card-title">üé® –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π —Ü–≤–µ—Ç</span>
            </div>
            <div class="color-picker-wrap">
                <div class="color-options">
                    <div class="color-opt" data-color="#00ff88" style="background:#00ff88"></div>
                    <div class="color-opt" data-color="#ffd700" style="background:#ffd700"></div>
                    <div class="color-opt" data-color="#0a84ff" style="background:#0a84ff"></div>
                    <div class="color-opt" data-color="#bf5af2" style="background:#bf5af2"></div>
                    <div class="color-opt" data-color="#ff453a" style="background:#ff453a"></div>
                    <div class="color-opt" data-color="#ff9500" style="background:#ff9500"></div>
                    <div class="color-opt" data-color="#00d4ff" style="background:#00d4ff"></div>
                    <div class="color-opt" data-color="#ff2d55" style="background:#ff2d55"></div>
                </div>
                <input type="color" id="customColor" class="custom-color-input" value="#00ff88">
            </div>
        </div>

        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-icon">üí∞</div>
                <div class="stat-value" id="totalEarned">0‚ÇΩ</div>
                <div class="stat-label">–í—Å–µ–≥–æ –∑–∞—Ä–∞–±–æ—Ç–∞–Ω–æ</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">üìÖ</div>
                <div class="stat-value" id="totalDays">0</div>
                <div class="stat-label">–î–Ω–µ–π –æ—Ç—Ä–∞–±–æ—Ç–∞–Ω–æ</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">‚è∞</div>
                <div class="stat-value" id="totalHours">0—á</div>
                <div class="stat-label">–ß–∞—Å–æ–≤ –Ω–∞ –≤–∞—Ö—Ç–µ</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">üéØ</div>
                <div class="stat-value" id="avgDay">0‚ÇΩ</div>
                <div class="stat-label">–°—Ä–µ–¥–Ω–∏–π –¥–µ–Ω—å</div>
            </div>
        </div>

        <div class="card">
            <div class="card-head">
                <span class="card-title">üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –º–µ—Å—è—Ü–∞–º</span>
            </div>
            <div class="months-stats" id="monthsStats"></div>
        </div>

        <div class="card">
            <div class="card-head">
                <span class="card-title">üéÆ –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</span>
            </div>
            <div class="quick-actions">
                <button class="action-btn" id="exportData">üì• –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö</button>
                <button class="action-btn" id="resetStats">üîÑ –°–±—Ä–æ—Å–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É</button>
                <button class="action-btn" id="shareProfile">üì§ –ü–æ–¥–µ–ª–∏—Ç—å—Å—è</button>
            </div>
        </div>
    </div>

    <div id="tab-cal" class="tab-content">
        <div class="period-sel">
            <button class="period-btn active" data-p="current">–¢–µ–∫—É—â–∞—è –≤–∞—Ö—Ç–∞</button>
            <button class="period-btn" data-p="month">–≠—Ç–æ—Ç –º–µ—Å—è—Ü</button>
            <button class="period-btn" data-p="year">2026 –≥–æ–¥</button>
        </div>
        <div class="stats3">
            <div class="stat3"><div class="stat3-val" style="color:var(--accent)" id="psDays">0</div><div class="stat3-lbl">–î–Ω–µ–π</div></div>
            <div class="stat3"><div class="stat3-val" style="color:var(--gold)" id="psHrs">0</div><div class="stat3-lbl">–ß–∞—Å–æ–≤</div></div>
            <div class="stat3"><div class="stat3-val" style="color:var(--blue)" id="psNet">0‚ÇΩ</div><div class="stat3-lbl">–ù–∞ —Ä—É–∫–∏</div></div>
        </div>
        <div class="cal-section">
            <div class="cal-head">
                <button class="cal-btn" id="calPrev">‚Äπ</button>
                <span class="cal-title" id="calTitle">–î–µ–∫–∞–±—Ä—å 2025</span>
                <button class="cal-btn" id="calNext">‚Ä∫</button>
            </div>
            <div class="cal-wdays"><div class="cal-wd">–ü–ù</div><div class="cal-wd">–í–¢</div><div class="cal-wd">–°–†</div><div class="cal-wd">–ß–¢</div><div class="cal-wd">–ü–¢</div><div class="cal-wd">–°–ë</div><div class="cal-wd">–í–°</div></div>
            <div class="cal-grid" id="calGrid"></div>
            <div class="cal-legend">
                <div class="leg-item"><div class="leg-dot" style="background:var(--accent)"></div>–í–∞—Ö—Ç–∞</div>
                <div class="leg-item"><div class="leg-dot" style="background:var(--gold)"></div>–ü—Ä–∞–∑–¥–Ω–∏–∫</div>
                <div class="leg-item"><div class="leg-dot" style="background:var(--blue)"></div>–î–æ—Ä–æ–≥–∞</div>
                <div class="leg-item"><div class="leg-dot" style="background:var(--red)"></div>–í—ã—Ö–æ–¥–Ω–æ–π</div>
                <div class="leg-item"><div class="leg-dot" style="background:var(--purple)"></div>–û—Ç–ø—É—Å–∫</div>
            </div>
        </div>
    </div>

    <div id="tab-hist" class="tab-content">
        <div class="card-title" style="margin-bottom:16px">üìú –ò—Å—Ç–æ—Ä–∏—è</div>
        <div id="histList"></div>
    </div>

    <div id="tab-set" class="tab-content">
        <div class="set-section">
            <div class="set-title">üé® –¢–µ–º–∞ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è</div>
            <div class="theme-selector">
                <button class="theme-opt active" data-theme="dark">üåô –¢–µ–º–Ω–∞—è</button>
                <button class="theme-opt" data-theme="rosneft">üü° –†–æ—Å–Ω–µ—Ñ—Ç—å</button>
            </div>
        </div>
        
        <div class="set-section">
            <div class="set-title">üí∞ –°—Ç–∞–≤–∫–∏</div>
            <div class="set-row"><span class="set-lbl">–ß–∞—Å–æ–≤–∞—è —Å—Ç–∞–≤–∫–∞</span><input type="number" class="set-input" id="sHourly" value="187.94" step="0.01"></div>
            <div class="set-row"><span class="set-lbl">–ß–∞—Å–æ–≤ –≤ —Å–º–µ–Ω–µ</span><input type="number" class="set-input" id="sHours" value="11"></div>
            <div class="set-row"><span class="set-lbl">–í–∞—Ö—Ç–∞ –Ω–∞–¥–±./–¥–µ–Ω—å</span><input type="number" class="set-input" id="sVahta" value="700"></div>
            <div class="set-row"><span class="set-lbl">–í–∞—Ö—Ç–∞ —Å–≤—ã—à–µ/–¥–µ–Ω—å</span><input type="number" class="set-input" id="sVahtaEx" value="100"></div>
        </div>
        <div class="set-section">
            <div class="set-title">üìä –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã (%)</div>
            <div class="set-row"><span class="set-lbl">–†–∞–π–æ–Ω–Ω—ã–π –∫–æ—ç—Ñ.</span><input type="number" class="set-input" id="sRegion" value="70"></div>
            <div class="set-row"><span class="set-lbl">–ü—Ä–æ—Ü–µ–Ω—Ç–Ω–∞—è –Ω–∞–¥–±.</span><input type="number" class="set-input" id="sPercent" value="50"></div>
            <div class="set-row"><span class="set-lbl">–î–æ–ø–ª–†–∞—Å—à–ó–æ–Ω</span><input type="number" class="set-input" id="sZone" value="10"></div>
            <div class="set-row"><span class="set-lbl">–ó–∞ —Å—Ç–∞–∂</span><input type="number" class="set-input" id="sExp" value="30"></div>
            <div class="set-row"><span class="set-lbl">–ù–î–§–õ</span><input type="number" class="set-input" id="sNdfl" value="13"></div>
        </div>
        <div class="set-section">
            <div class="set-title">üõ£Ô∏è –î–æ—Ä–æ–≥–∞</div>
            <div class="set-row"><span class="set-lbl">–ß–∞—Å–æ–≤ –¥–æ—Ä–æ–≥–∏</span><input type="number" class="set-input" id="sRoadH" value="8"></div>
        </div>
        <div class="set-section">
            <div class="set-title">üéÅ –ü—Ä–µ–º–∏—è</div>
            <div class="set-row"><span class="set-lbl">–ú–µ—Å—è—á–Ω–∞—è –ø—Ä–µ–º–∏—è</span><input type="number" class="set-input" id="sBonus" value="17857"></div>
        </div>
        <div class="set-section">
            <div class="set-title">üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å</div>
            <button class="save-btn" id="logoutBtn" style="background:linear-gradient(135deg,var(--red),#ff6b6b);margin-top:0">üö™ –í—ã–π—Ç–∏ –∏–∑ –∞–∫–∫–∞—É–Ω—Ç–∞</button>
        </div>
        <button class="save-btn" id="saveBtn">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
    </div>
</div>

<div class="edit-overlay" id="editOv">
    <div class="edit-panel">
        <div class="edit-head"><span class="edit-title">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</span><button class="edit-close" id="editClose">‚úï</button></div>
        <div class="edit-date" id="editDate">24 –¥–µ–∫–∞–±—Ä—è 2025</div>
        <div class="edit-grid">
            <button class="edit-btn vm" data-s="vm"><span class="edit-icon">‚õèÔ∏è</span>–í–∞—Ö—Ç–∞</button>
            <button class="edit-btn holiday" data-s="holiday"><span class="edit-icon">üéâ</span>–ü—Ä–∞–∑–¥–Ω–∏–∫</button>
            <button class="edit-btn road" data-s="road"><span class="edit-icon">üõ£Ô∏è</span>–î–æ—Ä–æ–≥–∞</button>
            <button class="edit-btn vo" data-s="vo"><span class="edit-icon">üè†</span>–í—ã—Ö–æ–¥–Ω–æ–π</button>
            <button class="edit-btn vacation" data-s="vacation"><span class="edit-icon">üèñÔ∏è</span>–û—Ç–ø—É—Å–∫</button>
            <button class="edit-btn hospital" data-s="hospital"><span class="edit-icon">üè•</span>–ë–æ–ª—å–Ω–∏—á–Ω—ã–π</button>
        </div>
    </div>
</div>

<nav class="bottom-nav" id="mainNav" style="display:none">
    <div class="nav-item active" data-t="dash"><span class="nav-icon">üí∞</span>Live</div>
    <div class="nav-item" data-t="profile"><span class="nav-icon">üë§</span>–ü—Ä–æ—Ñ–∏–ª—å</div>
    <div class="nav-item" data-t="cal"><span class="nav-icon">üìÖ</span>–ö–∞–ª–µ–Ω–¥–∞—Ä—å</div>
    <div class="nav-item" data-t="hist"><span class="nav-icon">üìú</span>–ò—Å—Ç–æ—Ä–∏—è</div>
    <div class="nav-item" data-t="set"><span class="nav-icon">‚öôÔ∏è</span>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</div>
</nav>

<div class="toast" id="toast"></div>

<script>
    const MO=['–Ø–Ω–≤–∞—Ä—å','–§–µ–≤—Ä–∞–ª—å','–ú–∞—Ä—Ç','–ê–ø—Ä–µ–ª—å','–ú–∞–π','–ò—é–Ω—å','–ò—é–ª—å','–ê–≤–≥—É—Å—Ç','–°–µ–Ω—Ç—è–±—Ä—å','–û–∫—Ç—è–±—Ä—å','–ù–æ—è–±—Ä—å','–î–µ–∫–∞–±—Ä—å'];
    const LB={vm:'–í–ú',vo:'–í–û',road:'–î',vacation:'–û–¢',hospital:'–ë',holiday:'‚≠ê'};
    const DEF={hourly:187.94,hours:11,vahta:700,vahtaEx:100,region:70,percent:50,zone:10,exp:30,ndfl:13,roadH:8,bonus:17857};
    const PASSWORD='65420';
    const APP_VERSION='2.1'; // New version with login
    
    // Clear old cache if version changed
    const savedVersion=localStorage.getItem('vversion');
    if(savedVersion!==APP_VERSION){
        console.log('New version detected, clearing all cache...');
        localStorage.clear();
        localStorage.setItem('vversion',APP_VERSION);
    }
    
    let S={...DEF},st={calY:2025,calM:11,selDay:null,period:'current',withBonus:true,theme:'dark',profile:{name:'–ò–≤–∞–Ω–æ–≤ –î–º–∏—Ç—Ä–∏–π –í—è—á–µ—Å–ª–∞–≤–æ–≤–∏—á',photo:'',company:'–û–û–û –ò–ö –°–ò–ë–ò–ù–¢–ï–ö',field:'–§–∏–ª–∏–∞–ª ¬´–ú–∞–∫—Ä–æ—Ä–µ–≥–∏–æ–Ω –í–æ—Å—Ç–æ—á–Ω–∞—è –°–∏–±–∏—Ä—å¬ª',site:'–£—á–∞—Å—Ç–æ–∫ –º–µ—Ç—Ä–æ–ª–æ–≥–∏–∏',position:'–¢–µ—Ö–Ω–∏–∫',experience:'3 –≥–æ–¥–∞',motto:'–¢–æ—á–Ω–æ—Å—Ç—å ‚Äî –∑–∞–ª–æ–≥ —É—Å–ø–µ—Ö–∞!',color:'#00ff88',tabNum:'–≥000-42454'}},sch={};
    let autoSaveTimer=null;
    let isOnline=navigator.onLine;
    let isLoggedIn=false;

    // Login system
    function checkLogin(){
        const saved=localStorage.getItem('vlogin');
        if(saved==='true'){
            showApp();
            return true;
        }
        return false;
    }

    function showApp(){
        isLoggedIn=true;
        document.getElementById('loginScreen').style.display='none';
        document.getElementById('mainHeader').style.display='flex';
        document.getElementById('mainApp').style.display='block';
        document.getElementById('mainNav').style.display='flex';
        init();
    }

    function handleLogin(){
        const input=document.getElementById('loginPassword');
        const password=input.value;
        const errorEl=document.getElementById('loginError');
        
        if(password===PASSWORD){
            localStorage.setItem('vlogin','true');
            errorEl.classList.remove('show');
            document.getElementById('loginScreen').style.animation='fadeOut .5s ease forwards';
            setTimeout(showApp,500);
        }else{
            errorEl.classList.add('show');
            input.value='';
            input.style.animation='shake .5s ease';
            setTimeout(()=>{
                errorEl.classList.remove('show');
                input.style.animation='';
            },2000);
        }
    }

    document.getElementById('loginBtn').addEventListener('click',handleLogin);
    document.getElementById('loginPassword').addEventListener('keypress',e=>{
        if(e.key==='Enter')handleLogin();
    });

    // Online/Offline detection (Service Worker removed for security)
    window.addEventListener('online',()=>{
        isOnline=true;
        document.getElementById('offlineBadge').classList.remove('show');
        toast('‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–æ –∫ —Å–µ—Ç–∏');
    });
    window.addEventListener('offline',()=>{
        isOnline=false;
        document.getElementById('offlineBadge').classList.add('show');
        toast('üìµ –û—Ñ–ª–∞–π–Ω —Ä–µ–∂–∏–º');
    });

    // Auto-save with debounce
    function triggerAutoSave(){
        if(autoSaveTimer)clearTimeout(autoSaveTimer);
        autoSaveTimer=setTimeout(()=>{
            saveSch();
            saveState();
            showSaveIndicator();
        },1000);
    }

    function showSaveIndicator(){
        const ind=document.getElementById('saveInd');
        ind.classList.add('show');
        setTimeout(()=>ind.classList.remove('show'),1500);
    }

    function saveState(){
        localStorage.setItem('vstate',JSON.stringify(st));
    }

    function loadState(){
        const saved=localStorage.getItem('vstate');
        if(saved){
            try{
                const loaded=JSON.parse(saved);
                st={...st,...loaded};
            }catch(e){console.log('State load error');}
        }
    }

    function getDefSch(){return{2025:{12:{1:'vm',2:'vm',3:'vm',4:'vm',5:'vm',6:'vm',7:'vm',8:'vm',9:'road',10:'vo',11:'vo',12:'vo',13:'vo',14:'vo',15:'vo',16:'vo',17:'vo',18:'road',19:'vm',20:'vm',21:'vm',22:'vm',23:'vm',24:'vm',25:'vm',26:'vm',27:'vm',28:'vm',29:'vm',30:'vm',31:'holiday'}},2026:{1:{1:'holiday',2:'holiday',3:'holiday',4:'holiday',5:'holiday',6:'holiday',7:'holiday',8:'holiday',9:'road',10:'vo',11:'vo',12:'vo',13:'vo',14:'vo',15:'vo',16:'vo',17:'vo',18:'vo',19:'vo',20:'vo',21:'vo',22:'vo',23:'vo',24:'vo',25:'vo',26:'vo',27:'vo',28:'vo',29:'vo',30:'vo',31:'vo'},2:{1:'vo',2:'vo',3:'vo',4:'vo',5:'vo',6:'vo',7:'vo',8:'vo',9:'road',10:'vm',11:'vm',12:'vm',13:'vm',14:'vm',15:'vm',16:'vm',17:'vm',18:'vm',19:'vm',20:'vm',21:'vm',22:'vm',23:'holiday',24:'vm',25:'vm',26:'vm',27:'vm',28:'vm'},3:{1:'vm',2:'vm',3:'vm',4:'vm',5:'vm',6:'vm',7:'vm',8:'holiday',9:'road',10:'vo',11:'vo',12:'vo',13:'vo',14:'vo',15:'vo',16:'vo',17:'vo',18:'vo',19:'vo',20:'vo',21:'vo',22:'vo',23:'vo',24:'vo',25:'vo',26:'vo',27:'vo',28:'vo',29:'vo',30:'vo',31:'vo'},4:{1:'vo',2:'vo',3:'vo',4:'vo',5:'vo',6:'vo',7:'vo',8:'vo',9:'road',10:'vm',11:'vm',12:'vm',13:'vm',14:'vm',15:'vm',16:'vm',17:'vm',18:'vm',19:'vm',20:'vm',21:'vm',22:'vm',23:'vm',24:'vm',25:'vm',26:'vm',27:'vm',28:'vm',29:'vm',30:'vm'},5:{1:'holiday',2:'vm',3:'vm',4:'vm',5:'vm',6:'vm',7:'vm',8:'vm',9:'holiday',10:'vm',11:'vm',12:'vm',13:'vm',14:'vm',15:'vm',16:'road',17:'vo',18:'vo',19:'vo',20:'vo',21:'vo',22:'vo',23:'vo',24:'vo',25:'vo',26:'vo',27:'vo',28:'vo',29:'vo',30:'vo',31:'vo'},6:{1:'vo',2:'vo',3:'vo',4:'vo',5:'vo',6:'vo',7:'vo',8:'vacation',9:'vacation',10:'vacation',11:'vacation',12:'vacation',13:'vacation',14:'vacation',15:'vacation',16:'vacation',17:'vacation',18:'vacation',19:'vacation',20:'vacation',21:'vacation',22:'vacation',23:'vacation',24:'vacation',25:'vacation',26:'vacation',27:'vacation',28:'vacation',29:'vacation',30:'vacation'},7:{1:'vacation',2:'vacation',3:'vacation',4:'vacation',5:'vacation',6:'vacation',7:'vacation',8:'vacation',9:'vo',10:'vo',11:'vo',12:'vo',13:'vo',14:'vo',15:'vo',16:'vo',17:'vo',18:'vo',19:'vo',20:'vo',21:'vo',22:'vo',23:'vo',24:'vo',25:'vo',26:'vo',27:'vo',28:'vo',29:'vo',30:'vo',31:'vo'},8:{1:'vo',2:'vo',3:'vo',4:'vo',5:'vo',6:'vo',7:'vo',8:'vo',9:'road',10:'vm',11:'vm',12:'vm',13:'vm',14:'vm',15:'vm',16:'vm',17:'vm',18:'vm',19:'vm',20:'vm',21:'vm',22:'vm',23:'vm',24:'vm',25:'vm',26:'vm',27:'vm',28:'vm',29:'vm',30:'vm',31:'vm'},9:{1:'vm',2:'vm',3:'vm',4:'vm',5:'vm',6:'vm',7:'vm',8:'vm',9:'road',10:'vm',11:'vm',12:'vm',13:'vm',14:'vm',15:'vm',16:'vm',17:'vm',18:'vm',19:'road',20:'vo',21:'vo',22:'vo',23:'vo',24:'vo',25:'vo',26:'vo',27:'vo',28:'vo',29:'vo',30:'vo'},10:{1:'vo',2:'vo',3:'vo',4:'vo',5:'vo',6:'vo',7:'vo',8:'vo',9:'vo',10:'vo',11:'vo',12:'vo',13:'vo',14:'vo',15:'vo',16:'vo',17:'vo',18:'vo',19:'vo',20:'vo',21:'vo',22:'vo',23:'vo',24:'vo',25:'vo',26:'vo',27:'vo',28:'vo',29:'vo',30:'road',31:'vm'},11:{1:'vm',2:'vm',3:'vm',4:'holiday',5:'vm',6:'vm',7:'vm',8:'vm',9:'vm',10:'vm',11:'vm',12:'vm',13:'vm',14:'vm',15:'vm',16:'vm',17:'vm',18:'vm',19:'vm',20:'vm',21:'vm',22:'vm',23:'vm',24:'vm',25:'vm',26:'vm',27:'vm',28:'vm',29:'vm',30:'road'},12:{1:'vm',2:'vm',3:'vm',4:'vm',5:'vm',6:'vm',7:'vm',8:'vm',9:'road',10:'vo',11:'vo',12:'vo',13:'vo',14:'vo',15:'vo',16:'vo',17:'vo',18:'vo',19:'vo',20:'vo',21:'vo',22:'vo',23:'vo',24:'vo',25:'vo',26:'vo',27:'vo',28:'vo',29:'vo',30:'vo',31:'vo'}}};}
    function loadSch(){const s=localStorage.getItem('vsch2');sch=s?JSON.parse(s):getDefSch();}
    function saveSch(){localStorage.setItem('vsch2',JSON.stringify(sch));}
    function getSt(y,m,d){return sch[y]?.[m]?.[d]||null;}
    function setSt(y,m,d,v){if(!sch[y])sch[y]={};if(!sch[y][m])sch[y][m]={};if(v==='clear')delete sch[y][m][d];else sch[y][m][d]=v;triggerAutoSave();}

    function calcDay(hrs,isHol,withB){
        const base=S.hourly*hrs;
        const region=base*(S.region/100);
        const percent=base*(S.percent/100);
        const zone=base*(S.zone/100);
        const exp=base*(S.exp/100);
        const vahta=S.vahta;
        const vahtaEx=S.vahtaEx;
        const holEx=isHol?base*1.722:0;
        const bonus=withB?(S.bonus/23):0;
        const gross=base+region+percent+zone+exp+vahta+vahtaEx+holEx+bonus;
        const ndfl=gross*(S.ndfl/100);
        return{base,region,percent,zone,exp,vahta,vahtaEx,holEx,bonus,gross,ndfl,net:gross-ndfl,hrs};
    }
    function calcRoad(){
        const hrs=S.roadH;
        const base=S.hourly*hrs;
        const region=base*(S.region/100);
        const percent=base*(S.percent/100);
        const zone=base*(S.zone/100);
        const exp=base*(S.exp/100);
        const gross=base+region+percent+zone+exp;
        const ndfl=gross*(S.ndfl/100);
        return{base,region,percent,zone,exp,gross,ndfl,net:gross-ndfl,hrs};
    }
    function calcPeriod(start,end,withB){
        let r={workDays:0,roadDays:0,holidays:0,hours:0,base:0,region:0,percent:0,zone:0,exp:0,vahta:0,vahtaEx:0,holEx:0,bonus:0,road:0,gross:0,ndfl:0,net:0};
        const cur=new Date(start);
        while(cur<=end){
            const y=cur.getFullYear(),m=cur.getMonth()+1,d=cur.getDate();
            const s=getSt(y,m,d);
            if(s==='vm'){r.workDays++;const day=calcDay(S.hours,false,withB);r.hours+=day.hrs;r.base+=day.base;r.region+=day.region;r.percent+=day.percent;r.zone+=day.zone;r.exp+=day.exp;r.vahta+=day.vahta;r.vahtaEx+=day.vahtaEx;r.bonus+=day.bonus;r.gross+=day.gross;r.ndfl+=day.ndfl;r.net+=day.net;}
            else if(s==='holiday'){r.holidays++;r.workDays++;const day=calcDay(S.hours,true,withB);r.hours+=day.hrs;r.base+=day.base;r.region+=day.region;r.percent+=day.percent;r.zone+=day.zone;r.exp+=day.exp;r.vahta+=day.vahta;r.vahtaEx+=day.vahtaEx;r.holEx+=day.holEx;r.bonus+=day.bonus;r.gross+=day.gross;r.ndfl+=day.ndfl;r.net+=day.net;}
            else if(s==='road'){r.roadDays++;const day=calcRoad();r.hours+=day.hrs;r.road+=day.gross;r.gross+=day.gross;r.ndfl+=day.ndfl;r.net+=day.net;}
            cur.setDate(cur.getDate()+1);
        }
        return r;
    }
    function findVahta(){
        const today=new Date();let start=new Date(today),end=new Date(today);
        for(let i=0;i<60;i++){const c=new Date(start);c.setDate(c.getDate()-1);const s=getSt(c.getFullYear(),c.getMonth()+1,c.getDate());if(s==='vm'||s==='road'||s==='holiday')start=c;else break;}
        for(let i=0;i<60;i++){const c=new Date(end);c.setDate(c.getDate()+1);const s=getSt(c.getFullYear(),c.getMonth()+1,c.getDate());if(s==='vm'||s==='road'||s==='holiday')end=c;else break;}
        return{start,end};
    }
    function getShiftProg(){const n=new Date();const h=n.getHours()+n.getMinutes()/60+n.getSeconds()/3600;if(h<8)return 0;if(h>=20)return S.hours;let w=h-8;if(h>=14)w-=1;else if(h>=13)w=5;return Math.max(0,Math.min(w,S.hours));}
    function fmt(n){return Math.round(n).toLocaleString('ru-RU');}
    function fmtD(d){return d.toLocaleDateString('ru-RU',{day:'numeric',month:'long'});}
    function toast(m){const t=document.getElementById('toast');t.textContent=m;t.classList.add('show');setTimeout(()=>t.classList.remove('show'),2000);}

    function updateLive(){
        const now=new Date();const y=now.getFullYear(),m=now.getMonth()+1,d=now.getDate();
        const status=getSt(y,m,d);
        document.getElementById('liveTime').textContent=now.toLocaleTimeString('ru-RU');
        const dot=document.getElementById('liveDot'),txt=document.getElementById('liveTxt'),badge=document.getElementById('badge');

        if(status==='vm'||status==='holiday'){
            const prog=getShiftProg();const isHol=status==='holiday';
            if(isHol){dot.className='live-dot holiday';txt.className='live-text holiday';txt.textContent='–ü–†–ê–ó–î–ù–ò–ö x2';badge.textContent='x2';badge.style.background='rgba(255,215,0,.2)';badge.style.color='#ffd700';}
            else if(prog>0&&prog<S.hours){dot.className='live-dot';txt.className='live-text on';txt.textContent='–°–ú–ï–ù–ê –ò–î–Å–¢';badge.textContent='LIVE';badge.style.background='';badge.style.color='';}
            else if(prog>=S.hours){dot.className='live-dot off';txt.className='live-text off';txt.textContent='–°–ú–ï–ù–ê –ó–ê–í–ï–†–®–ï–ù–ê';badge.textContent='‚úì';}
            else{dot.className='live-dot';txt.className='live-text on';txt.textContent='–†–ê–ë–û–ß–ò–ô –î–ï–ù–¨';badge.textContent='–°–ú–ï–ù–ê';}
            document.getElementById('shiftProg').style.display='block';
            document.getElementById('shiftHrs').textContent=`${prog.toFixed(1)} / ${S.hours} —á`;
            document.getElementById('shiftFill').style.width=`${(prog/S.hours)*100}%`;
        }else if(status==='road'){
            dot.className='live-dot road';txt.className='live-text road';txt.textContent='–î–ï–ù–¨ –î–û–†–û–ì–ò';badge.textContent='üõ£Ô∏è';
            document.getElementById('shiftProg').style.display='none';
        }else{
            dot.className='live-dot off';txt.className='live-text off';txt.textContent=status==='vacation'?'–û–¢–ü–£–°–ö':'–í–´–•–û–î–ù–û–ô';badge.textContent=status==='vacation'?'üèñÔ∏è':'üè†';
            document.getElementById('shiftProg').style.display='none';
        }

        const vahta=findVahta();const yesterday=new Date(now);yesterday.setDate(yesterday.getDate()-1);yesterday.setHours(23,59,59);
        const pastData=calcPeriod(vahta.start,yesterday,st.withBonus);
        let todayEarned=0,perSec=0;
        if(status==='vm'||status==='holiday'){
            const prog=getShiftProg();const isHol=status==='holiday';
            const dayFull=calcDay(S.hours,isHol,st.withBonus);
            const rateH=dayFull.net/S.hours;const rateS=rateH/3600;
            todayEarned=rateH*prog;perSec=prog>0&&prog<S.hours?rateS:0;
        }else if(status==='road'){todayEarned=calcRoad().net;}

        const total=pastData.net+todayEarned;const rub=Math.floor(total);const kop=Math.round((total-rub)*100);
        document.getElementById('moneyRub').textContent=fmt(rub);
        document.getElementById('moneyKop').textContent='.'+kop.toString().padStart(2,'0');
        document.getElementById('perSec').textContent=perSec.toFixed(4);
        document.getElementById('moneyPs').style.display=perSec>0?'block':'none';

        document.getElementById('qsToday').textContent=fmt(todayEarned)+'‚ÇΩ';
        document.getElementById('qsHrs').textContent=Math.round(pastData.hours+(status==='vm'||status==='holiday'?getShiftProg():0))+'—á';
        document.getElementById('qsDays').textContent=pastData.workDays+(status==='vm'||status==='holiday'?1:0);

        const totalDays=Math.ceil((vahta.end-vahta.start)/86400000)+1;
        const passedDays=Math.ceil((now-vahta.start)/86400000);
        const pct=Math.min(100,(passedDays/totalDays)*100);
        document.getElementById('vDates').textContent=`${fmtD(vahta.start)} ‚Äî ${fmtD(vahta.end)}`;
        document.getElementById('vPct').textContent=Math.round(pct)+'%';
        document.getElementById('vFill').style.width=pct+'%';
        document.getElementById('vsWork').textContent=pastData.workDays;
        document.getElementById('vsRoad').textContent=pastData.roadDays;
        document.getElementById('vsHol').textContent=pastData.holidays;
        document.getElementById('vsLeft').textContent=Math.max(0,totalDays-passedDays);
    }

    function updateDayBk(){
        const day=calcDay(S.hours,false,st.withBonus);
        let h=`<div class="bk-row"><span class="bk-lbl">–û–∫–ª–∞–¥ (${S.hours}—á √ó ${S.hourly}‚ÇΩ)</span><span class="bk-val">${fmt(day.base)}‚ÇΩ</span></div>
        <div class="bk-row"><span class="bk-lbl">–†–∞–π–æ–Ω–Ω—ã–π –∫–æ—ç—Ñ.<span class="bk-pct">${S.region}%</span></span><span class="bk-val">${fmt(day.region)}‚ÇΩ</span></div>
        <div class="bk-row"><span class="bk-lbl">–ü—Ä–æ—Ü–µ–Ω—Ç–Ω–∞—è –Ω–∞–¥–±.<span class="bk-pct">${S.percent}%</span></span><span class="bk-val">${fmt(day.percent)}‚ÇΩ</span></div>
        <div class="bk-row"><span class="bk-lbl">–î–æ–ø–ª–†–∞—Å—à–ó–æ–Ω<span class="bk-pct">${S.zone}%</span></span><span class="bk-val">${fmt(day.zone)}‚ÇΩ</span></div>
        <div class="bk-row"><span class="bk-lbl">–ó–∞ —Å—Ç–∞–∂<span class="bk-pct">${S.exp}%</span></span><span class="bk-val">${fmt(day.exp)}‚ÇΩ</span></div>
        <div class="bk-row"><span class="bk-lbl">–í–∞—Ö—Ç–æ–≤—ã–π –º–µ—Ç–æ–¥</span><span class="bk-val">${fmt(day.vahta)}‚ÇΩ</span></div>
        <div class="bk-row"><span class="bk-lbl">–í–∞—Ö—Ç. —Å–≤—ã—à–µ</span><span class="bk-val">${fmt(day.vahtaEx)}‚ÇΩ</span></div>`;
        if(st.withBonus)h+=`<div class="bk-row hl"><span class="bk-lbl">üéÅ –ü—Ä–µ–º–∏—è</span><span class="bk-val" style="color:var(--gold)">${fmt(day.bonus)}‚ÇΩ</span></div>`;
        h+=`<div class="bk-row"><span class="bk-lbl">–ù–î–§–õ<span class="bk-pct">${S.ndfl}%</span></span><span class="bk-val" style="color:var(--red)">-${fmt(day.ndfl)}‚ÇΩ</span></div>
        <div class="bk-row total"><span class="bk-lbl">üíµ –ù–∞ —Ä—É–∫–∏</span><span class="bk-val">${fmt(day.net)}‚ÇΩ</span></div>`;
        document.getElementById('dayBk').innerHTML=h;
    }

    function renderCal(){
        const y=st.calY,m=st.calM;document.getElementById('calTitle').textContent=`${MO[m]} ${y}`;
        const first=new Date(y,m,1),last=new Date(y,m+1,0),startWd=(first.getDay()+6)%7,today=new Date();
        let h='';for(let i=0;i<startWd;i++)h+='<div class="cal-day empty"></div>';
        for(let d=1;d<=last.getDate();d++){
            const s=getSt(y,m+1,d);let cls='cal-day',lbl='';
            if(s){cls+=' '+s;lbl=LB[s]||'';}
            if(d===today.getDate()&&m===today.getMonth()&&y===today.getFullYear())cls+=' today';
            if(new Date(y,m,d)<new Date(today.getFullYear(),today.getMonth(),today.getDate()))cls+=' past';
            h+=`<div class="${cls}" data-d="${d}"><span class="cal-day-num">${d}</span>${lbl?`<span class="cal-day-lbl">${lbl}</span>`:''}</div>`;
        }
        document.getElementById('calGrid').innerHTML=h;
        document.querySelectorAll('.cal-day:not(.empty)').forEach(el=>el.addEventListener('click',()=>openEdit(parseInt(el.dataset.d))));
        updatePeriodStats();
    }

    function updatePeriodStats(){
        let start,end;const now=new Date();
        switch(st.period){
            case'current':const v=findVahta();start=v.start;end=v.end;break;
            case'month':start=new Date(now.getFullYear(),now.getMonth(),1);end=new Date(now.getFullYear(),now.getMonth()+1,0);break;
            case'year':start=new Date(2026,0,1);end=new Date(2026,11,31);break;
        }
        const data=calcPeriod(start,end,st.withBonus);
        document.getElementById('psDays').textContent=data.workDays;
        document.getElementById('psHrs').textContent=Math.round(data.hours);
        document.getElementById('psNet').textContent=fmt(data.net)+'‚ÇΩ';
    }

    function renderHist(){
        const html=[];const today=new Date();
        for(let i=0;i<60;i++){
            const d=new Date(today);d.setDate(d.getDate()-i);
            const s=getSt(d.getFullYear(),d.getMonth()+1,d.getDate());
            if(s==='vm'){const day=calcDay(S.hours,false,st.withBonus);html.push(`<div class="hist-item"><div><div class="hist-date">${d.toLocaleDateString('ru-RU',{day:'numeric',month:'short',weekday:'short'})}</div><div class="hist-meta">${S.hours}—á ‚Ä¢ –í–∞—Ö—Ç–∞</div></div><span class="hist-amt">+${fmt(day.net)}‚ÇΩ</span></div>`);}
            else if(s==='holiday'){const day=calcDay(S.hours,true,st.withBonus);html.push(`<div class="hist-item"><div><div class="hist-date">${d.toLocaleDateString('ru-RU',{day:'numeric',month:'short',weekday:'short'})}</div><div class="hist-meta">${S.hours}—á ‚Ä¢ –ü—Ä–∞–∑–¥–Ω–∏–∫</div></div><span class="hist-amt holiday">+${fmt(day.net)}‚ÇΩ</span></div>`);}
            else if(s==='road'){const day=calcRoad();html.push(`<div class="hist-item"><div><div class="hist-date">${d.toLocaleDateString('ru-RU',{day:'numeric',month:'short',weekday:'short'})}</div><div class="hist-meta">${S.roadH}—á ‚Ä¢ –î–æ—Ä–æ–≥–∞</div></div><span class="hist-amt road">+${fmt(day.net)}‚ÇΩ</span></div>`);}
        }
        document.getElementById('histList').innerHTML=html.length?html.join(''):'<p style="color:var(--muted);text-align:center">–ù–µ—Ç –∑–∞–ø–∏—Å–µ–π</p>';
    }

    function openEdit(day){
        st.selDay={y:st.calY,m:st.calM+1,d:day};
        document.getElementById('editDate').textContent=new Date(st.calY,st.calM,day).toLocaleDateString('ru-RU',{day:'numeric',month:'long',year:'numeric',weekday:'long'});
        document.getElementById('editOv').classList.add('show');
    }

    function loadSet(){
        const s=localStorage.getItem('vset2');if(s)S={...DEF,...JSON.parse(s)};
        document.getElementById('sHourly').value=S.hourly;document.getElementById('sHours').value=S.hours;
        document.getElementById('sVahta').value=S.vahta;document.getElementById('sVahtaEx').value=S.vahtaEx;
        document.getElementById('sRegion').value=S.region;document.getElementById('sPercent').value=S.percent;
        document.getElementById('sZone').value=S.zone;document.getElementById('sExp').value=S.exp;
        document.getElementById('sNdfl').value=S.ndfl;document.getElementById('sRoadH').value=S.roadH;
        document.getElementById('sBonus').value=S.bonus;
    }

    function saveSet(){
        S.hourly=parseFloat(document.getElementById('sHourly').value)||DEF.hourly;
        S.hours=parseFloat(document.getElementById('sHours').value)||DEF.hours;
        S.vahta=parseFloat(document.getElementById('sVahta').value)||DEF.vahta;
        S.vahtaEx=parseFloat(document.getElementById('sVahtaEx').value)||DEF.vahtaEx;
        S.region=parseFloat(document.getElementById('sRegion').value)||DEF.region;
        S.percent=parseFloat(document.getElementById('sPercent').value)||DEF.percent;
        S.zone=parseFloat(document.getElementById('sZone').value)||DEF.zone;
        S.exp=parseFloat(document.getElementById('sExp').value)||DEF.exp;
        S.ndfl=parseFloat(document.getElementById('sNdfl').value)||DEF.ndfl;
        S.roadH=parseFloat(document.getElementById('sRoadH').value)||DEF.roadH;
        S.bonus=parseFloat(document.getElementById('sBonus').value)||DEF.bonus;
        localStorage.setItem('vset2',JSON.stringify(S));
        localStorage.setItem('vtheme',st.theme);
        toast('‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–æ');
        showSaveIndicator();
        updateLive();updateDayBk();
    }

    function setTheme(theme){
        st.theme=theme;
        document.body.dataset.theme=theme;
        localStorage.setItem('vtheme',theme);
        document.querySelectorAll('.theme-opt').forEach(opt=>{
            opt.classList.toggle('active',opt.dataset.theme===theme);
        });
        toast(theme==='rosneft'?'üü° –¢–µ–º–∞ –†–æ—Å–Ω–µ—Ñ—Ç—å':'üåô –¢–µ–º–Ω–∞—è —Ç–µ–º–∞');
        triggerAutoSave();
    }

    document.querySelectorAll('.nav-item').forEach(i=>i.addEventListener('click',function(){
        const t=this.dataset.t;document.querySelectorAll('.nav-item').forEach(n=>n.classList.remove('active'));
        document.querySelectorAll('.tab-content').forEach(c=>c.classList.remove('active'));
        this.classList.add('active');document.getElementById('tab-'+t).classList.add('active');
        if(t==='cal')renderCal();if(t==='hist')renderHist();if(t==='profile')updateProfile();
    }));
    
    document.getElementById('saveBtn').addEventListener('click',saveSet);
    
    setTimeout(()=>{
        const logoutBtn=document.getElementById('logoutBtn');
        if(logoutBtn){
            logoutBtn.addEventListener('click',()=>{
                if(confirm('–í—ã–π—Ç–∏ –∏–∑ –∞–∫–∫–∞—É–Ω—Ç–∞?')){
                    localStorage.removeItem('vlogin');
                    location.reload();
                }
            });
        }
    },500);
    
    document.getElementById('themeBtn').addEventListener('click',()=>{
        const newTheme=st.theme==='dark'?'rosneft':'dark';
        setTheme(newTheme);
    });
    
    document.querySelectorAll('.theme-opt').forEach(opt=>{
        opt.addEventListener('click',function(){
            setTheme(this.dataset.theme);
        });
    });
    
    document.getElementById('calPrev').addEventListener('click',()=>{st.calM--;if(st.calM<0){st.calM=11;st.calY--;}if(st.calY<2025){st.calY=2025;st.calM=0;}renderCal();});
    document.getElementById('calNext').addEventListener('click',()=>{st.calM++;if(st.calM>11){st.calM=0;st.calY++;}if(st.calY>2027){st.calY=2027;st.calM=11;}renderCal();});
    document.querySelectorAll('.period-btn').forEach(b=>b.addEventListener('click',function(){st.period=this.dataset.p;document.querySelectorAll('.period-btn').forEach(x=>x.classList.remove('active'));this.classList.add('active');updatePeriodStats();}));
    document.getElementById('tgBonus').addEventListener('click',function(){st.withBonus=true;this.classList.add('on');document.getElementById('tgNoBonus').classList.remove('on');updateDayBk();updateLive();triggerAutoSave();});
    document.getElementById('tgNoBonus').addEventListener('click',function(){st.withBonus=false;this.classList.add('on');document.getElementById('tgBonus').classList.remove('on');updateDayBk();updateLive();triggerAutoSave();});
    document.getElementById('editClose').addEventListener('click',()=>document.getElementById('editOv').classList.remove('show'));
    document.getElementById('editOv').addEventListener('click',e=>{if(e.target.id==='editOv')document.getElementById('editOv').classList.remove('show');});
    document.querySelectorAll('.edit-btn').forEach(b=>b.addEventListener('click',function(){if(!st.selDay)return;setSt(st.selDay.y,st.selDay.m,st.selDay.d,this.dataset.s);document.getElementById('editOv').classList.remove('show');renderCal();updateLive();toast('‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–æ');}));

    // Profile functions
    function updateProfile(){
        document.getElementById('profileName').textContent=st.profile.name;
        document.getElementById('profilePosition').textContent=st.profile.position;
        document.getElementById('profileCompany').textContent=st.profile.company;
        document.getElementById('workCompany').textContent=st.profile.company;
        document.getElementById('workField').textContent=st.profile.field;
        document.getElementById('workSite').textContent=st.profile.site;
        document.getElementById('workPosition').textContent=st.profile.position;
        document.getElementById('workExp').textContent=st.profile.experience;
        document.getElementById('workTabNum').textContent=st.profile.tabNum;
        document.getElementById('mottoText').textContent=st.profile.motto;
        
        if(st.profile.photo){
            document.getElementById('photoImg').src=st.profile.photo;
            document.getElementById('photoImg').style.display='block';
            document.getElementById('photoPlaceholder').style.display='none';
        }else{
            document.getElementById('photoImg').style.display='none';
            document.getElementById('photoPlaceholder').style.display='flex';
        }
        
        document.querySelectorAll('.color-opt').forEach(opt=>{
            opt.classList.toggle('active',opt.dataset.color===st.profile.color);
        });
        
        const allTime={workDays:0,hours:0,net:0};
        for(let y=2025;y<=2026;y++){
            for(let m=1;m<=12;m++){
                if(!sch[y]||!sch[y][m])continue;
                for(let d=1;d<=31;d++){
                    const s=getSt(y,m,d);
                    if(s==='vm'){
                        allTime.workDays++;
                        const day=calcDay(S.hours,false,st.withBonus);
                        allTime.hours+=day.hrs;
                        allTime.net+=day.net;
                    }else if(s==='holiday'){
                        allTime.workDays++;
                        const day=calcDay(S.hours,true,st.withBonus);
                        allTime.hours+=day.hrs;
                        allTime.net+=day.net;
                    }else if(s==='road'){
                        const day=calcRoad();
                        allTime.hours+=day.hrs;
                        allTime.net+=day.net;
                    }
                }
            }
        }
        
        document.getElementById('totalEarned').textContent=fmt(allTime.net)+'‚ÇΩ';
        document.getElementById('totalDays').textContent=allTime.workDays;
        document.getElementById('totalHours').textContent=Math.round(allTime.hours)+'—á';
        document.getElementById('avgDay').textContent=allTime.workDays>0?fmt(allTime.net/allTime.workDays)+'‚ÇΩ':'0‚ÇΩ';
        
        const monthsData={};
        for(let y=2025;y<=2026;y++){
            for(let m=1;m<=12;m++){
                if(!sch[y]||!sch[y][m])continue;
                const key=`${y}-${m}`;
                monthsData[key]={y,m,net:0};
                for(let d=1;d<=31;d++){
                    const s=getSt(y,m,d);
                    if(s==='vm'){
                        const day=calcDay(S.hours,false,st.withBonus);
                        monthsData[key].net+=day.net;
                    }else if(s==='holiday'){
                        const day=calcDay(S.hours,true,st.withBonus);
                        monthsData[key].net+=day.net;
                    }else if(s==='road'){
                        monthsData[key].net+=calcRoad().net;
                    }
                }
            }
        }
        
        let monthsHtml='';
        Object.entries(monthsData).reverse().slice(0,6).forEach(([key,data])=>{
            if(data.net>0){
                monthsHtml+=`<div class="month-row">
                    <span class="month-name">${MO[data.m-1]} ${data.y}</span>
                    <span class="month-amount">${fmt(data.net)}‚ÇΩ</span>
                </div>`;
            }
        });
        document.getElementById('monthsStats').innerHTML=monthsHtml||'<p style="color:var(--muted);text-align:center;padding:12px">–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö</p>';
    }

    document.getElementById('photoEdit').addEventListener('click',()=>{
        document.getElementById('photoInput').click();
    });

    document.getElementById('photoInput').addEventListener('change',function(e){
        const file=e.target.files[0];
        if(file){
            const reader=new FileReader();
            reader.onload=function(event){
                st.profile.photo=event.target.result;
                triggerAutoSave();
                updateProfile();
                toast('‚úÖ –§–æ—Ç–æ –∑–∞–≥—Ä—É–∂–µ–Ω–æ');
            };
            reader.readAsDataURL(file);
        }
    });

    document.getElementById('editWork').addEventListener('click',()=>{
        const company=prompt('–ö–æ–º–ø–∞–Ω–∏—è:',st.profile.company);
        if(company===null)return;
        const field=prompt('–§–∏–ª–∏–∞–ª:',st.profile.field);
        if(field===null)return;
        const site=prompt('–£—á–∞—Å—Ç–æ–∫:',st.profile.site);
        if(site===null)return;
        const position=prompt('–î–æ–ª–∂–Ω–æ—Å—Ç—å:',st.profile.position);
        if(position===null)return;
        const experience=prompt('–û–ø—ã—Ç —Ä–∞–±–æ—Ç—ã:',st.profile.experience);
        if(experience===null)return;
        const tabNum=prompt('–¢–∞–±–µ–ª—å–Ω—ã–π –Ω–æ–º–µ—Ä:',st.profile.tabNum);
        if(tabNum===null)return;
        
        st.profile.company=company.trim()||st.profile.company;
        st.profile.field=field.trim()||st.profile.field;
        st.profile.site=site.trim()||st.profile.site;
        st.profile.position=position.trim()||st.profile.position;
        st.profile.experience=experience.trim()||st.profile.experience;
        st.profile.tabNum=tabNum.trim()||st.profile.tabNum;
        
        const name=prompt('–í–∞—à–µ –∏–º—è:',st.profile.name);
        if(name&&name.trim()){
            st.profile.name=name.trim();
        }
        
        triggerAutoSave();
        updateProfile();
        toast('‚úÖ –î–∞–Ω–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω—ã');
    });

    document.getElementById('editMotto').addEventListener('click',()=>{
        const motto=prompt('–í–∞—à –¥–µ–≤–∏–∑:',st.profile.motto);
        if(motto&&motto.trim()){
            st.profile.motto=motto.trim();
            triggerAutoSave();
            updateProfile();
            toast('‚úÖ –î–µ–≤–∏–∑ –∏–∑–º–µ–Ω—ë–Ω');
        }
    });

    document.querySelectorAll('.color-opt').forEach(opt=>{
        opt.addEventListener('click',function(){
            st.profile.color=this.dataset.color;
            document.documentElement.style.setProperty('--accent',st.profile.color);
            triggerAutoSave();
            updateProfile();
            toast('üé® –¶–≤–µ—Ç –∏–∑–º–µ–Ω—ë–Ω');
        });
    });

    document.getElementById('customColor').addEventListener('input',function(){
        st.profile.color=this.value;
        document.documentElement.style.setProperty('--accent',this.value);
        document.querySelectorAll('.color-opt').forEach(o=>o.classList.remove('active'));
        triggerAutoSave();
    });

    document.getElementById('exportData').addEventListener('click',()=>{
        const data={schedule:sch,settings:S,profile:st.profile};
        const json=JSON.stringify(data,null,2);
        const blob=new Blob([json],{type:'application/json'});
        const url=URL.createObjectURL(blob);
        const a=document.createElement('a');
        a.href=url;
        a.download=`vahta-backup-${new Date().toISOString().split('T')[0]}.json`;
        a.click();
        URL.revokeObjectURL(url);
        toast('üì• –î–∞–Ω–Ω—ã–µ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã');
    });

    document.getElementById('resetStats').addEventListener('click',()=>{
        if(confirm('–°–±—Ä–æ—Å–∏—Ç—å –≤—Å—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É? –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å!')){
            if(confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã? –í—Å–µ –¥–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç —É–¥–∞–ª–µ–Ω—ã!')){
                localStorage.clear();
                location.reload();
            }
        }
    });

    document.getElementById('shareProfile').addEventListener('click',()=>{
        const allTime={workDays:0,net:0};
        for(let y=2025;y<=2026;y++){
            for(let m=1;m<=12;m++){
                if(!sch[y]||!sch[y][m])continue;
                for(let d=1;d<=31;d++){
                    const s=getSt(y,m,d);
                    if(s==='vm'||s==='holiday'){
                        allTime.workDays++;
                        const day=calcDay(S.hours,s==='holiday',st.withBonus);
                        allTime.net+=day.net;
                    }else if(s==='road'){
                        allTime.net+=calcRoad().net;
                    }
                }
            }
        }
        const text=`üí∞ –í–∞—Ö—Ç–∞ Live - –ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å\n\nüë§ ${st.profile.name}\nüè¢ ${st.profile.company}\nüìç ${st.profile.field}\nüíº ${st.profile.position}\n\nüìÖ –î–Ω–µ–π: ${allTime.workDays}\nüí∞ –ó–∞—Ä–∞–±–æ—Ç–∞–Ω–æ: ${fmt(allTime.net)}‚ÇΩ\n\nüí≠ "${st.profile.motto}"\n\n‚õèÔ∏è –¢–æ—á–Ω–æ—Å—Ç—å –≤ —Ä–∞–±–æ—Ç–µ!`;
        if(navigator.share){
            navigator.share({title:'–ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å –í–∞—Ö—Ç–∞ Live',text});
        }else{
            navigator.clipboard.writeText(text);
            toast('üìã –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ –≤ –±—É—Ñ–µ—Ä');
        }
    });

    function init(){
        loadSch();loadSet();loadState();
        const savedTheme=localStorage.getItem('vtheme')||'dark';
        setTheme(savedTheme);
        if(st.profile.color){
            document.documentElement.style.setProperty('--accent',st.profile.color);
        }
        const now=new Date();st.calY=now.getFullYear();st.calM=now.getMonth();
        if(!isOnline)document.getElementById('offlineBadge').classList.add('show');
        updateLive();updateDayBk();renderCal();setInterval(updateLive,1000);
    }
    document.addEventListener('DOMContentLoaded',()=>{
        if(!checkLogin()){
            document.getElementById('loginPassword').focus();
        }
    });
</script>
```

</body>
</html>
