<!DOCTYPE html>

<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Ğ’Ğ°Ñ…Ñ‚Ğ° Live</title>
    <link href="https://fonts.googleapis.com/css2?family=Unbounded:wght@400;600;700;800&family=JetBrains+Mono:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        :root{--bg:#000;--bg2:#0a0a0a;--card:#111;--elev:#1a1a1a;--accent:#00ff88;--accent2:#00cc6a;--gold:#ffd700;--orange:#ff9500;--red:#ff453a;--blue:#0a84ff;--purple:#bf5af2;--text:#fff;--text2:rgba(255,255,255,.7);--muted:rgba(255,255,255,.4);--border:rgba(255,255,255,.1)}
        *{margin:0;padding:0;box-sizing:border-box;-webkit-tap-highlight-color:transparent}
        html,body{font-family:'Unbounded',sans-serif;background:var(--bg);color:var(--text);min-height:100vh}
        body{padding-bottom:calc(85px + env(safe-area-inset-bottom))}
        .header{position:sticky;top:0;z-index:50;background:rgba(0,0,0,.9);backdrop-filter:blur(20px);padding:12px 16px;padding-top:calc(12px + env(safe-area-inset-top));border-bottom:1px solid var(--border);display:flex;justify-content:space-between;align-items:center}
        .logo{display:flex;align-items:center;gap:10px}
        .logo-icon{width:36px;height:36px;background:linear-gradient(135deg,var(--accent),var(--accent2));border-radius:10px;display:flex;align-items:center;justify-content:center;font-size:1.1rem}
        .logo-text{font-size:1.2rem;font-weight:700;background:linear-gradient(135deg,var(--accent),var(--accent2));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
        .badge{font-size:.6rem;padding:4px 8px;background:rgba(0,255,136,.15);color:var(--accent);border-radius:6px;font-weight:600}
        .container{padding:16px}

```
    .live-card{background:linear-gradient(180deg,var(--card),var(--bg2));border-radius:24px;padding:24px;margin-bottom:16px;border:1px solid var(--border);position:relative;overflow:hidden}
    .live-card::before{content:'';position:absolute;top:0;left:0;right:0;height:2px;background:linear-gradient(90deg,var(--accent),var(--gold),var(--accent));background-size:200%;animation:grad 3s linear infinite}
    @keyframes grad{0%{background-position:0}100%{background-position:200%}}
    
    .live-status{display:flex;align-items:center;gap:8px;margin-bottom:16px}
    .live-dot{width:10px;height:10px;border-radius:50%;background:var(--accent);box-shadow:0 0 10px var(--accent);animation:pulse 1.5s ease-in-out infinite}
    @keyframes pulse{0%,100%{transform:scale(1);opacity:1}50%{transform:scale(1.2);opacity:.7}}
    .live-dot.off{background:var(--orange);box-shadow:none;animation:none}
    .live-dot.holiday{background:var(--gold)}
    .live-dot.road{background:var(--blue)}
    .live-text{font-size:.75rem;font-weight:600;text-transform:uppercase;letter-spacing:1px}
    .live-text.on{color:var(--accent)}.live-text.off{color:var(--orange)}.live-text.holiday{color:var(--gold)}.live-text.road{color:var(--blue)}
    .live-time{margin-left:auto;font-family:'JetBrains Mono',monospace;font-size:.8rem;color:var(--muted)}
    
    .money{text-align:center;margin-bottom:20px}
    .money-label{font-size:.8rem;color:var(--muted);margin-bottom:8px}
    .money-amount{font-family:'JetBrains Mono',monospace;font-size:3.2rem;font-weight:700;display:flex;align-items:baseline;justify-content:center;gap:4px}
    .money-val{background:linear-gradient(135deg,var(--accent),#0fa,var(--accent));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-size:200%;animation:shine 3s linear infinite}
    @keyframes shine{0%{background-position:0}100%{background-position:200%}}
    .money-kop{font-size:1.2rem;color:var(--accent2);opacity:.7}
    .money-cur{font-size:1.5rem;color:var(--accent2)}
    .money-ps{font-size:.75rem;color:var(--muted);margin-top:8px}
    .money-ps span{color:var(--accent);font-weight:600}
    
    .shift-prog{margin-top:20px}
    .shift-head{display:flex;justify-content:space-between;margin-bottom:8px;font-size:.75rem}
    .shift-head span:last-child{color:var(--accent);font-family:'JetBrains Mono',monospace}
    .prog-track{height:6px;background:var(--bg);border-radius:10px;overflow:hidden}
    .prog-fill{height:100%;background:linear-gradient(90deg,var(--accent),var(--gold));border-radius:10px;transition:width 1s;position:relative}
    .prog-fill::after{content:'';position:absolute;right:0;top:50%;transform:translateY(-50%);width:12px;height:12px;background:var(--accent);border-radius:50%;box-shadow:0 0 10px var(--accent)}
    .shift-labels{display:flex;justify-content:space-between;margin-top:6px;font-size:.65rem;color:var(--muted)}
    
    .stats3{display:grid;grid-template-columns:repeat(3,1fr);gap:10px;margin-bottom:16px}
    .stat3{background:var(--card);border-radius:16px;padding:14px 12px;text-align:center;border:1px solid var(--border)}
    .stat3-val{font-family:'JetBrains Mono',monospace;font-size:1.1rem;font-weight:700;margin-bottom:4px}
    .stat3-lbl{font-size:.6rem;color:var(--muted);text-transform:uppercase}
    
    .card{background:var(--card);border-radius:20px;padding:20px;margin-bottom:16px;border:1px solid var(--border)}
    .card-head{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}
    .card-title{font-size:.9rem;font-weight:600}
    .toggle-wrap{display:flex;gap:8px}
    .toggle-btn{padding:6px 12px;border-radius:8px;font-size:.7rem;font-weight:600;border:1px solid var(--border);background:var(--bg2);color:var(--muted);cursor:pointer}
    .toggle-btn.on{background:var(--accent);color:var(--bg);border-color:var(--accent)}
    
    .bk-row{display:flex;justify-content:space-between;align-items:center;padding:10px 12px;background:var(--bg2);border-radius:10px;margin-bottom:6px;font-size:.75rem}
    .bk-row.hl{background:rgba(0,255,136,.1);border:1px solid rgba(0,255,136,.3)}
    .bk-row.total{background:linear-gradient(135deg,rgba(0,255,136,.1),rgba(255,215,0,.1));border:1px solid var(--accent);margin-top:8px}
    .bk-lbl{color:var(--text2);display:flex;align-items:center;gap:6px}
    .bk-pct{font-size:.6rem;padding:2px 6px;background:var(--elev);border-radius:4px;color:var(--muted)}
    .bk-val{font-family:'JetBrains Mono',monospace;font-weight:600}
    .bk-row.total .bk-lbl{color:var(--text);font-weight:600}
    .bk-row.total .bk-val{color:var(--accent);font-size:1rem}
    
    .vahta-head{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:16px}
    .vahta-info h3{font-size:.9rem;margin-bottom:4px}
    .vahta-dates{font-size:.7rem;color:var(--muted)}
    .vahta-pct{font-family:'JetBrains Mono',monospace;font-size:1.8rem;font-weight:700;color:var(--accent)}
    .vahta-prog{height:8px;background:var(--bg);border-radius:10px;overflow:hidden;margin-bottom:12px}
    .vahta-fill{height:100%;background:linear-gradient(90deg,var(--accent),var(--blue));border-radius:10px}
    .vahta-stats{display:grid;grid-template-columns:repeat(4,1fr);gap:8px}
    .vs{text-align:center;padding:10px 6px;background:var(--bg2);border-radius:10px}
    .vs-val{font-family:'JetBrains Mono',monospace;font-size:1rem;font-weight:700;margin-bottom:2px}
    .vs-lbl{font-size:.55rem;color:var(--muted);text-transform:uppercase}
    
    .cal-section{background:var(--card);border-radius:20px;padding:16px;margin-bottom:16px;border:1px solid var(--border)}
    .cal-head{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}
    .cal-btn{width:32px;height:32px;border-radius:8px;background:var(--bg2);border:1px solid var(--border);color:var(--text);font-size:1rem;cursor:pointer;display:flex;align-items:center;justify-content:center}
    .cal-btn:active{background:var(--accent);color:var(--bg)}
    .cal-title{font-size:.95rem;font-weight:600}
    .cal-wdays{display:grid;grid-template-columns:repeat(7,1fr);margin-bottom:8px}
    .cal-wd{text-align:center;font-size:.6rem;color:var(--muted);padding:8px 0;font-weight:500}
    .cal-grid{display:grid;grid-template-columns:repeat(7,1fr);gap:4px}
    .cal-day{aspect-ratio:1;display:flex;flex-direction:column;align-items:center;justify-content:center;border-radius:8px;font-size:.8rem;font-weight:500;cursor:pointer;background:var(--bg2);border:2px solid transparent;transition:all .15s;position:relative}
    .cal-day:active{transform:scale(.9)}
    .cal-day.empty{background:transparent;pointer-events:none}
    .cal-day.vm{background:rgba(0,255,136,.15);border-color:rgba(0,255,136,.3);color:var(--accent)}
    .cal-day.vo{background:rgba(255,69,58,.1);border-color:rgba(255,69,58,.2);color:var(--red)}
    .cal-day.road{background:rgba(10,132,255,.15);border-color:rgba(10,132,255,.3);color:var(--blue)}
    .cal-day.vacation{background:rgba(191,90,242,.15);border-color:rgba(191,90,242,.3);color:var(--purple)}
    .cal-day.holiday{background:rgba(255,215,0,.2);border-color:rgba(255,215,0,.4);color:var(--gold)}
    .cal-day.hospital{background:rgba(255,149,0,.15);border-color:rgba(255,149,0,.3);color:var(--orange)}
    .cal-day.today{box-shadow:0 0 0 2px var(--gold),0 0 15px rgba(255,215,0,.4)}
    .cal-day.past{opacity:.5}
    .cal-day-num{font-size:.85rem;line-height:1}
    .cal-day-lbl{font-size:.4rem;margin-top:1px;text-transform:uppercase;opacity:.9}
    .cal-legend{display:flex;flex-wrap:wrap;gap:10px;margin-top:12px;padding-top:12px;border-top:1px solid var(--border)}
    .leg-item{display:flex;align-items:center;gap:4px;font-size:.6rem;color:var(--muted)}
    .leg-dot{width:8px;height:8px;border-radius:3px}
    
    .edit-overlay{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.9);z-index:100;display:none;align-items:flex-end}
    .edit-overlay.show{display:flex}
    .edit-panel{width:100%;background:var(--card);border-radius:24px 24px 0 0;padding:24px;padding-bottom:calc(24px + env(safe-area-inset-bottom));animation:slideUp .3s}
    @keyframes slideUp{from{transform:translateY(100%)}to{transform:translateY(0)}}
    .edit-head{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}
    .edit-title{font-size:1rem}
    .edit-close{width:32px;height:32px;border-radius:50%;background:var(--bg2);border:none;color:var(--text2);font-size:1.2rem;cursor:pointer}
    .edit-date{font-size:.8rem;color:var(--muted);margin-bottom:16px}
    .edit-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:10px}
    .edit-btn{padding:16px 10px;border-radius:14px;border:2px solid var(--border);background:var(--bg2);color:var(--text2);font-size:.7rem;font-weight:600;cursor:pointer;display:flex;flex-direction:column;align-items:center;gap:6px;font-family:'Unbounded',sans-serif}
    .edit-btn:active{transform:scale(.95)}
    .edit-btn.vm{border-color:var(--accent);color:var(--accent)}
    .edit-btn.road{border-color:var(--blue);color:var(--blue)}
    .edit-btn.vo{border-color:var(--red);color:var(--red)}
    .edit-btn.vacation{border-color:var(--purple);color:var(--purple)}
    .edit-btn.holiday{border-color:var(--gold);color:var(--gold)}
    .edit-btn.hospital{border-color:var(--orange);color:var(--orange)}
    .edit-icon{font-size:1.4rem}
    
    .bottom-nav{position:fixed;bottom:0;left:0;right:0;background:rgba(10,10,10,.95);backdrop-filter:blur(20px);border-top:1px solid var(--border);padding:8px 10px;padding-bottom:calc(8px + env(safe-area-inset-bottom));display:flex;justify-content:space-around;z-index:50}
    .nav-item{display:flex;flex-direction:column;align-items:center;gap:4px;padding:8px 12px;border-radius:12px;color:var(--muted);font-size:.5rem;cursor:pointer}
    .nav-item.active{color:var(--accent);background:rgba(0,255,136,.1)}
    .nav-icon{font-size:1.1rem}
    
    .tab-content{display:none}.tab-content.active{display:block}
    
    .set-section{margin-bottom:24px}
    .set-title{font-size:.8rem;color:var(--muted);margin-bottom:12px;padding-left:4px}
    .set-row{display:flex;justify-content:space-between;align-items:center;padding:14px 16px;background:var(--card);border:1px solid var(--border);border-radius:12px;margin-bottom:8px}
    .set-lbl{font-size:.8rem}
    .set-input{width:100px;padding:10px 12px;border-radius:8px;background:var(--bg);border:1px solid var(--border);color:var(--text);font-family:'JetBrains Mono',monospace;font-size:.9rem;text-align:right;outline:none}
    .set-input:focus{border-color:var(--accent)}
    .save-btn{width:100%;padding:16px;border-radius:14px;background:linear-gradient(135deg,var(--accent),var(--accent2));border:none;color:var(--bg);font-size:.9rem;font-weight:700;cursor:pointer;font-family:'Unbounded',sans-serif;margin-top:16px}
    .save-btn:active{transform:scale(.98)}
    
    .hist-item{display:flex;justify-content:space-between;align-items:center;padding:14px 16px;background:var(--card);border:1px solid var(--border);border-radius:12px;margin-bottom:8px}
    .hist-date{font-size:.8rem;font-weight:500}
    .hist-meta{font-size:.65rem;color:var(--muted)}
    .hist-amt{font-family:'JetBrains Mono',monospace;font-size:1rem;font-weight:700;color:var(--accent)}
    .hist-amt.road{color:var(--blue)}.hist-amt.holiday{color:var(--gold)}
    
    .period-sel{display:flex;gap:8px;overflow-x:auto;padding:4px 0;margin-bottom:16px}
    .period-sel::-webkit-scrollbar{display:none}
    .period-btn{flex-shrink:0;padding:10px 14px;border-radius:10px;background:var(--card);border:1px solid var(--border);color:var(--text2);font-size:.7rem;font-weight:500;cursor:pointer;font-family:'Unbounded',sans-serif}
    .period-btn.active{background:var(--accent);color:var(--bg);border-color:var(--accent)}
    
    .toast{position:fixed;bottom:calc(100px + env(safe-area-inset-bottom));left:50%;transform:translateX(-50%) translateY(100px);background:var(--elev);border:1px solid var(--accent);border-radius:12px;padding:12px 20px;font-size:.8rem;z-index:200;opacity:0;transition:all .3s}
    .toast.show{transform:translateX(-50%) translateY(0);opacity:1}
</style>
```

</head>
<body>
    <header class="header">
        <div class="logo">
            <div class="logo-icon">â›ï¸</div>
            <span class="logo-text">Ğ’Ğ°Ñ…Ñ‚Ğ° Live</span>
        </div>
        <span class="badge" id="badge">LIVE</span>
    </header>

```
<div class="container">
    <!-- Dashboard -->
    <div id="tab-dash" class="tab-content active">
        <div class="live-card">
            <div class="live-status">
                <div class="live-dot" id="liveDot"></div>
                <span class="live-text on" id="liveTxt">Ğ¡ĞœĞ•ĞĞ Ğ˜Ğ”ĞĞ¢</span>
                <span class="live-time" id="liveTime">12:34:56</span>
            </div>
            <div class="money">
                <div class="money-label">Ğ—Ğ°Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°Ğ½Ğ¾ Ğ·Ğ° Ğ²Ğ°Ñ…Ñ‚Ñƒ</div>
                <div class="money-amount">
                    <span class="money-val" id="moneyRub">0</span>
                    <span class="money-kop" id="moneyKop">.00</span>
                    <span class="money-cur">â‚½</span>
                </div>
                <div class="money-ps" id="moneyPs">+<span id="perSec">0.00</span>â‚½/ÑĞµĞº</div>
            </div>
            <div class="shift-prog" id="shiftProg">
                <div class="shift-head">
                    <span>ĞŸÑ€Ğ¾Ğ³Ñ€ĞµÑÑ ÑĞ¼ĞµĞ½Ñ‹</span>
                    <span id="shiftHrs">0.0 / 11 Ñ‡</span>
                </div>
                <div class="prog-track"><div class="prog-fill" id="shiftFill" style="width:0%"></div></div>
                <div class="shift-labels"><span>08:00</span><span>ĞĞ±ĞµĞ´</span><span>20:00</span></div>
            </div>
        </div>

        <div class="stats3">
            <div class="stat3"><div class="stat3-val" style="color:var(--accent)" id="qsToday">0â‚½</div><div class="stat3-lbl">Ğ¡ĞµĞ³Ğ¾Ğ´Ğ½Ñ</div></div>
            <div class="stat3"><div class="stat3-val" style="color:var(--gold)" id="qsHrs">0Ñ‡</div><div class="stat3-lbl">Ğ§Ğ°ÑĞ¾Ğ²</div></div>
            <div class="stat3"><div class="stat3-val" style="color:var(--blue)" id="qsDays">0</div><div class="stat3-lbl">Ğ”Ğ½ĞµĞ¹</div></div>
        </div>

        <div class="card">
            <div class="card-head">
                <span class="card-title">ğŸ’µ Ğ—Ğ° Ğ´ĞµĞ½ÑŒ</span>
                <div class="toggle-wrap">
                    <button class="toggle-btn on" id="tgBonus">Ğ¡ Ğ¿Ñ€ĞµĞ¼Ğ¸ĞµĞ¹</button>
                    <button class="toggle-btn" id="tgNoBonus">Ğ‘ĞµĞ·</button>
                </div>
            </div>
            <div id="dayBk"></div>
        </div>

        <div class="card">
            <div class="vahta-head">
                <div class="vahta-info"><h3>ğŸ“… ĞŸÑ€Ğ¾Ğ³Ñ€ĞµÑÑ Ğ²Ğ°Ñ…Ñ‚Ñ‹</h3><div class="vahta-dates" id="vDates">-</div></div>
                <div class="vahta-pct" id="vPct">0%</div>
            </div>
            <div class="vahta-prog"><div class="vahta-fill" id="vFill" style="width:0%"></div></div>
            <div class="vahta-stats">
                <div class="vs"><div class="vs-val" style="color:var(--accent)" id="vsWork">0</div><div class="vs-lbl">Ğ Ğ°Ğ±.</div></div>
                <div class="vs"><div class="vs-val" style="color:var(--blue)" id="vsRoad">0</div><div class="vs-lbl">Ğ”Ğ¾Ñ€Ğ¾Ğ³Ğ°</div></div>
                <div class="vs"><div class="vs-val" style="color:var(--gold)" id="vsHol">0</div><div class="vs-lbl">ĞŸÑ€Ğ°Ğ·Ğ´.</div></div>
                <div class="vs"><div class="vs-val" style="color:var(--orange)" id="vsLeft">0</div><div class="vs-lbl">ĞÑÑ‚Ğ°Ğ».</div></div>
            </div>
        </div>
    </div>

    <!-- Calendar -->
    <div id="tab-cal" class="tab-content">
        <div class="period-sel">
            <button class="period-btn active" data-p="current">Ğ¢ĞµĞºÑƒÑ‰Ğ°Ñ Ğ²Ğ°Ñ…Ñ‚Ğ°</button>
            <button class="period-btn" data-p="month">Ğ­Ñ‚Ğ¾Ñ‚ Ğ¼ĞµÑÑÑ†</button>
            <button class="period-btn" data-p="year">2026 Ğ³Ğ¾Ğ´</button>
        </div>
        <div class="stats3">
            <div class="stat3"><div class="stat3-val" style="color:var(--accent)" id="psDays">0</div><div class="stat3-lbl">Ğ”Ğ½ĞµĞ¹</div></div>
            <div class="stat3"><div class="stat3-val" style="color:var(--gold)" id="psHrs">0</div><div class="stat3-lbl">Ğ§Ğ°ÑĞ¾Ğ²</div></div>
            <div class="stat3"><div class="stat3-val" style="color:var(--blue)" id="psNet">0â‚½</div><div class="stat3-lbl">ĞĞ° Ñ€ÑƒĞºĞ¸</div></div>
        </div>
        <div class="cal-section">
            <div class="cal-head">
                <button class="cal-btn" id="calPrev">â€¹</button>
                <span class="cal-title" id="calTitle">Ğ”ĞµĞºĞ°Ğ±Ñ€ÑŒ 2025</span>
                <button class="cal-btn" id="calNext">â€º</button>
            </div>
            <div class="cal-wdays"><div class="cal-wd">ĞŸĞ</div><div class="cal-wd">Ğ’Ğ¢</div><div class="cal-wd">Ğ¡Ğ </div><div class="cal-wd">Ğ§Ğ¢</div><div class="cal-wd">ĞŸĞ¢</div><div class="cal-wd">Ğ¡Ğ‘</div><div class="cal-wd">Ğ’Ğ¡</div></div>
            <div class="cal-grid" id="calGrid"></div>
            <div class="cal-legend">
                <div class="leg-item"><div class="leg-dot" style="background:var(--accent)"></div>Ğ’Ğ°Ñ…Ñ‚Ğ°</div>
                <div class="leg-item"><div class="leg-dot" style="background:var(--gold)"></div>ĞŸÑ€Ğ°Ğ·Ğ´Ğ½Ğ¸Ğº</div>
                <div class="leg-item"><div class="leg-dot" style="background:var(--blue)"></div>Ğ”Ğ¾Ñ€Ğ¾Ğ³Ğ°</div>
                <div class="leg-item"><div class="leg-dot" style="background:var(--red)"></div>Ğ’Ñ‹Ñ…Ğ¾Ğ´Ğ½Ğ¾Ğ¹</div>
                <div class="leg-item"><div class="leg-dot" style="background:var(--purple)"></div>ĞÑ‚Ğ¿ÑƒÑĞº</div>
            </div>
        </div>
    </div>

    <!-- History -->
    <div id="tab-hist" class="tab-content">
        <div class="card-title" style="margin-bottom:16px">ğŸ“œ Ğ˜ÑÑ‚Ğ¾Ñ€Ğ¸Ñ</div>
        <div id="histList"></div>
    </div>

    <!-- Settings -->
    <div id="tab-set" class="tab-content">
        <div class="set-section">
            <div class="set-title">ğŸ’° Ğ¡Ñ‚Ğ°Ğ²ĞºĞ¸</div>
            <div class="set-row"><span class="set-lbl">Ğ§Ğ°ÑĞ¾Ğ²Ğ°Ñ ÑÑ‚Ğ°Ğ²ĞºĞ°</span><input type="number" class="set-input" id="sHourly" value="187.94" step="0.01"></div>
            <div class="set-row"><span class="set-lbl">Ğ§Ğ°ÑĞ¾Ğ² Ğ² ÑĞ¼ĞµĞ½Ğµ</span><input type="number" class="set-input" id="sHours" value="11"></div>
            <div class="set-row"><span class="set-lbl">Ğ’Ğ°Ñ…Ñ‚Ğ° Ğ½Ğ°Ğ´Ğ±./Ğ´ĞµĞ½ÑŒ</span><input type="number" class="set-input" id="sVahta" value="700"></div>
            <div class="set-row"><span class="set-lbl">Ğ’Ğ°Ñ…Ñ‚Ğ° ÑĞ²Ñ‹ÑˆĞµ/Ğ´ĞµĞ½ÑŒ</span><input type="number" class="set-input" id="sVahtaEx" value="100"></div>
        </div>
        <div class="set-section">
            <div class="set-title">ğŸ“Š ĞšĞ¾ÑÑ„Ñ„Ğ¸Ñ†Ğ¸ĞµĞ½Ñ‚Ñ‹ (%)</div>
            <div class="set-row"><span class="set-lbl">Ğ Ğ°Ğ¹Ğ¾Ğ½Ğ½Ñ‹Ğ¹ ĞºĞ¾ÑÑ„.</span><input type="number" class="set-input" id="sRegion" value="70"></div>
            <div class="set-row"><span class="set-lbl">ĞŸÑ€Ğ¾Ñ†ĞµĞ½Ñ‚Ğ½Ğ°Ñ Ğ½Ğ°Ğ´Ğ±.</span><input type="number" class="set-input" id="sPercent" value="50"></div>
            <div class="set-row"><span class="set-lbl">Ğ”Ğ¾Ğ¿Ğ»Ğ Ğ°ÑÑˆĞ—Ğ¾Ğ½</span><input type="number" class="set-input" id="sZone" value="10"></div>
            <div class="set-row"><span class="set-lbl">Ğ—Ğ° ÑÑ‚Ğ°Ğ¶</span><input type="number" class="set-input" id="sExp" value="30"></div>
            <div class="set-row"><span class="set-lbl">ĞĞ”Ğ¤Ğ›</span><input type="number" class="set-input" id="sNdfl" value="13"></div>
        </div>
        <div class="set-section">
            <div class="set-title">ğŸ›£ï¸ Ğ”Ğ¾Ñ€Ğ¾Ğ³Ğ°</div>
            <div class="set-row"><span class="set-lbl">Ğ§Ğ°ÑĞ¾Ğ² Ğ´Ğ¾Ñ€Ğ¾Ğ³Ğ¸</span><input type="number" class="set-input" id="sRoadH" value="8"></div>
        </div>
        <div class="set-section">
            <div class="set-title">ğŸ ĞŸÑ€ĞµĞ¼Ğ¸Ñ</div>
            <div class="set-row"><span class="set-lbl">ĞœĞµÑÑÑ‡Ğ½Ğ°Ñ Ğ¿Ñ€ĞµĞ¼Ğ¸Ñ</span><input type="number" class="set-input" id="sBonus" value="17857"></div>
        </div>
        <button class="save-btn" id="saveBtn">ğŸ’¾ Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½Ğ¸Ñ‚ÑŒ</button>
    </div>
</div>

<div class="edit-overlay" id="editOv">
    <div class="edit-panel">
        <div class="edit-head"><span class="edit-title">Ğ ĞµĞ´Ğ°ĞºÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ</span><button class="edit-close" id="editClose">âœ•</button></div>
        <div class="edit-date" id="editDate">24 Ğ´ĞµĞºĞ°Ğ±Ñ€Ñ 2025</div>
        <div class="edit-grid">
            <button class="edit-btn vm" data-s="vm"><span class="edit-icon">â›ï¸</span>Ğ’Ğ°Ñ…Ñ‚Ğ°</button>
            <button class="edit-btn holiday" data-s="holiday"><span class="edit-icon">ğŸ‰</span>ĞŸÑ€Ğ°Ğ·Ğ´Ğ½Ğ¸Ğº</button>
            <button class="edit-btn road" data-s="road"><span class="edit-icon">ğŸ›£ï¸</span>Ğ”Ğ¾Ñ€Ğ¾Ğ³Ğ°</button>
            <button class="edit-btn vo" data-s="vo"><span class="edit-icon">ğŸ </span>Ğ’Ñ‹Ñ…Ğ¾Ğ´Ğ½Ğ¾Ğ¹</button>
            <button class="edit-btn vacation" data-s="vacation"><span class="edit-icon">ğŸ–ï¸</span>ĞÑ‚Ğ¿ÑƒÑĞº</button>
            <button class="edit-btn hospital" data-s="hospital"><span class="edit-icon">ğŸ¥</span>Ğ‘Ğ¾Ğ»ÑŒĞ½Ğ¸Ñ‡Ğ½Ñ‹Ğ¹</button>
        </div>
    </div>
</div>

<nav class="bottom-nav">
    <div class="nav-item active" data-t="dash"><span class="nav-icon">ğŸ’°</span>Live</div>
    <div class="nav-item" data-t="cal"><span class="nav-icon">ğŸ“…</span>ĞšĞ°Ğ»ĞµĞ½Ğ´Ğ°Ñ€ÑŒ</div>
    <div class="nav-item" data-t="hist"><span class="nav-icon">ğŸ“œ</span>Ğ˜ÑÑ‚Ğ¾Ñ€Ğ¸Ñ</div>
    <div class="nav-item" data-t="set"><span class="nav-icon">âš™ï¸</span>ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸</div>
</nav>

<div class="toast" id="toast"></div>

<script>
```

const MO=[â€˜Ğ¯Ğ½Ğ²Ğ°Ñ€ÑŒâ€™,â€˜Ğ¤ĞµĞ²Ñ€Ğ°Ğ»ÑŒâ€™,â€˜ĞœĞ°Ñ€Ñ‚â€™,â€˜ĞĞ¿Ñ€ĞµĞ»ÑŒâ€™,â€˜ĞœĞ°Ğ¹â€™,â€˜Ğ˜ÑĞ½ÑŒâ€™,â€˜Ğ˜ÑĞ»ÑŒâ€™,â€˜ĞĞ²Ğ³ÑƒÑÑ‚â€™,â€˜Ğ¡ĞµĞ½Ñ‚ÑĞ±Ñ€ÑŒâ€™,â€˜ĞĞºÑ‚ÑĞ±Ñ€ÑŒâ€™,â€˜ĞĞ¾ÑĞ±Ñ€ÑŒâ€™,â€˜Ğ”ĞµĞºĞ°Ğ±Ñ€ÑŒâ€™];
const LB={vm:â€˜Ğ’Ğœâ€™,vo:â€˜Ğ’Ğâ€™,road:â€˜Ğ”â€™,vacation:â€˜ĞĞ¢â€™,hospital:â€˜Ğ‘â€™,holiday:â€˜ĞŸâ€™};
const DEF={hourly:187.94,hours:11,vahta:700,vahtaEx:100,region:70,percent:50,zone:10,exp:30,ndfl:13,roadH:8,bonus:17857};
let S={â€¦DEF},st={calY:2025,calM:11,selDay:null,period:â€˜currentâ€™,withBonus:true},sch={};

function getDefSch(){return{2025:{12:{1:â€˜vmâ€™,2:â€˜vmâ€™,3:â€˜vmâ€™,4:â€˜vmâ€™,5:â€˜vmâ€™,6:â€˜vmâ€™,7:â€˜vmâ€™,8:â€˜vmâ€™,9:â€˜roadâ€™,10:â€˜voâ€™,11:â€˜voâ€™,12:â€˜voâ€™,13:â€˜voâ€™,14:â€˜voâ€™,15:â€˜voâ€™,16:â€˜voâ€™,17:â€˜voâ€™,18:â€˜roadâ€™,19:â€˜vmâ€™,20:â€˜vmâ€™,21:â€˜vmâ€™,22:â€˜vmâ€™,23:â€˜vmâ€™,24:â€˜vmâ€™,25:â€˜vmâ€™,26:â€˜vmâ€™,27:â€˜vmâ€™,28:â€˜vmâ€™,29:â€˜vmâ€™,30:â€˜vmâ€™,31:â€˜holidayâ€™}},2026:{1:{1:â€˜holidayâ€™,2:â€˜holidayâ€™,3:â€˜holidayâ€™,4:â€˜holidayâ€™,5:â€˜holidayâ€™,6:â€˜holidayâ€™,7:â€˜holidayâ€™,8:â€˜holidayâ€™,9:â€˜roadâ€™,10:â€˜voâ€™,11:â€˜voâ€™,12:â€˜voâ€™,13:â€˜voâ€™,14:â€˜voâ€™,15:â€˜voâ€™,16:â€˜voâ€™,17:â€˜voâ€™,18:â€˜voâ€™,19:â€˜voâ€™,20:â€˜voâ€™,21:â€˜voâ€™,22:â€˜voâ€™,23:â€˜voâ€™,24:â€˜voâ€™,25:â€˜voâ€™,26:â€˜voâ€™,27:â€˜voâ€™,28:â€˜voâ€™,29:â€˜voâ€™,30:â€˜voâ€™,31:â€˜voâ€™},2:{1:â€˜voâ€™,2:â€˜voâ€™,3:â€˜voâ€™,4:â€˜voâ€™,5:â€˜voâ€™,6:â€˜voâ€™,7:â€˜voâ€™,8:â€˜voâ€™,9:â€˜roadâ€™,10:â€˜vmâ€™,11:â€˜vmâ€™,12:â€˜vmâ€™,13:â€˜vmâ€™,14:â€˜vmâ€™,15:â€˜vmâ€™,16:â€˜vmâ€™,17:â€˜vmâ€™,18:â€˜vmâ€™,19:â€˜vmâ€™,20:â€˜vmâ€™,21:â€˜vmâ€™,22:â€˜vmâ€™,23:â€˜holidayâ€™,24:â€˜vmâ€™,25:â€˜vmâ€™,26:â€˜vmâ€™,27:â€˜vmâ€™,28:â€˜vmâ€™},3:{1:â€˜vmâ€™,2:â€˜vmâ€™,3:â€˜vmâ€™,4:â€˜vmâ€™,5:â€˜vmâ€™,6:â€˜vmâ€™,7:â€˜vmâ€™,8:â€˜holidayâ€™,9:â€˜roadâ€™,10:â€˜voâ€™,11:â€˜voâ€™,12:â€˜voâ€™,13:â€˜voâ€™,14:â€˜voâ€™,15:â€˜voâ€™,16:â€˜voâ€™,17:â€˜voâ€™,18:â€˜voâ€™,19:â€˜voâ€™,20:â€˜voâ€™,21:â€˜voâ€™,22:â€˜voâ€™,23:â€˜voâ€™,24:â€˜voâ€™,25:â€˜voâ€™,26:â€˜voâ€™,27:â€˜voâ€™,28:â€˜voâ€™,29:â€˜voâ€™,30:â€˜voâ€™,31:â€˜voâ€™},4:{1:â€˜voâ€™,2:â€˜voâ€™,3:â€˜voâ€™,4:â€˜voâ€™,5:â€˜voâ€™,6:â€˜voâ€™,7:â€˜voâ€™,8:â€˜voâ€™,9:â€˜roadâ€™,10:â€˜vmâ€™,11:â€˜vmâ€™,12:â€˜vmâ€™,13:â€˜vmâ€™,14:â€˜vmâ€™,15:â€˜vmâ€™,16:â€˜vmâ€™,17:â€˜vmâ€™,18:â€˜vmâ€™,19:â€˜vmâ€™,20:â€˜vmâ€™,21:â€˜vmâ€™,22:â€˜vmâ€™,23:â€˜vmâ€™,24:â€˜vmâ€™,25:â€˜vmâ€™,26:â€˜vmâ€™,27:â€˜vmâ€™,28:â€˜vmâ€™,29:â€˜vmâ€™,30:â€˜vmâ€™},5:{1:â€˜holidayâ€™,2:â€˜vmâ€™,3:â€˜vmâ€™,4:â€˜vmâ€™,5:â€˜vmâ€™,6:â€˜vmâ€™,7:â€˜vmâ€™,8:â€˜vmâ€™,9:â€˜holidayâ€™,10:â€˜vmâ€™,11:â€˜vmâ€™,12:â€˜vmâ€™,13:â€˜vmâ€™,14:â€˜vmâ€™,15:â€˜vmâ€™,16:â€˜roadâ€™,17:â€˜voâ€™,18:â€˜voâ€™,19:â€˜voâ€™,20:â€˜voâ€™,21:â€˜voâ€™,22:â€˜voâ€™,23:â€˜voâ€™,24:â€˜voâ€™,25:â€˜voâ€™,26:â€˜voâ€™,27:â€˜voâ€™,28:â€˜voâ€™,29:â€˜voâ€™,30:â€˜voâ€™,31:â€˜voâ€™},6:{1:â€˜voâ€™,2:â€˜voâ€™,3:â€˜voâ€™,4:â€˜voâ€™,5:â€˜voâ€™,6:â€˜voâ€™,7:â€˜voâ€™,8:â€˜vacationâ€™,9:â€˜vacationâ€™,10:â€˜vacationâ€™,11:â€˜vacationâ€™,12:â€˜vacationâ€™,13:â€˜vacationâ€™,14:â€˜vacationâ€™,15:â€˜vacationâ€™,16:â€˜vacationâ€™,17:â€˜vacationâ€™,18:â€˜vacationâ€™,19:â€˜vacationâ€™,20:â€˜vacationâ€™,21:â€˜vacationâ€™,22:â€˜vacationâ€™,23:â€˜vacationâ€™,24:â€˜vacationâ€™,25:â€˜vacationâ€™,26:â€˜vacationâ€™,27:â€˜vacationâ€™,28:â€˜vacationâ€™,29:â€˜vacationâ€™,30:â€˜vacationâ€™},7:{1:â€˜vacationâ€™,2:â€˜vacationâ€™,3:â€˜vacationâ€™,4:â€˜vacationâ€™,5:â€˜vacationâ€™,6:â€˜vacationâ€™,7:â€˜vacationâ€™,8:â€˜vacationâ€™,9:â€˜voâ€™,10:â€˜voâ€™,11:â€˜voâ€™,12:â€˜voâ€™,13:â€˜voâ€™,14:â€˜voâ€™,15:â€˜voâ€™,16:â€˜voâ€™,17:â€˜voâ€™,18:â€˜voâ€™,19:â€˜voâ€™,20:â€˜voâ€™,21:â€˜voâ€™,22:â€˜voâ€™,23:â€˜voâ€™,24:â€˜voâ€™,25:â€˜voâ€™,26:â€˜voâ€™,27:â€˜voâ€™,28:â€˜voâ€™,29:â€˜voâ€™,30:â€˜voâ€™,31:â€˜voâ€™},8:{1:â€˜voâ€™,2:â€˜voâ€™,3:â€˜voâ€™,4:â€˜voâ€™,5:â€˜voâ€™,6:â€˜voâ€™,7:â€˜voâ€™,8:â€˜voâ€™,9:â€˜roadâ€™,10:â€˜vmâ€™,11:â€˜vmâ€™,12:â€˜vmâ€™,13:â€˜vmâ€™,14:â€˜vmâ€™,15:â€˜vmâ€™,16:â€˜vmâ€™,17:â€˜vmâ€™,18:â€˜vmâ€™,19:â€˜vmâ€™,20:â€˜vmâ€™,21:â€˜vmâ€™,22:â€˜vmâ€™,23:â€˜vmâ€™,24:â€˜vmâ€™,25:â€˜vmâ€™,26:â€˜vmâ€™,27:â€˜vmâ€™,28:â€˜vmâ€™,29:â€˜vmâ€™,30:â€˜vmâ€™,31:â€˜vmâ€™},9:{1:â€˜vmâ€™,2:â€˜vmâ€™,3:â€˜vmâ€™,4:â€˜vmâ€™,5:â€˜vmâ€™,6:â€˜vmâ€™,7:â€˜vmâ€™,8:â€˜vmâ€™,9:â€˜roadâ€™,10:â€˜vmâ€™,11:â€˜vmâ€™,12:â€˜vmâ€™,13:â€˜vmâ€™,14:â€˜vmâ€™,15:â€˜vmâ€™,16:â€˜vmâ€™,17:â€˜vmâ€™,18:â€˜vmâ€™,19:â€˜roadâ€™,20:â€˜voâ€™,21:â€˜voâ€™,22:â€˜voâ€™,23:â€˜voâ€™,24:â€˜voâ€™,25:â€˜voâ€™,26:â€˜voâ€™,27:â€˜voâ€™,28:â€˜voâ€™,29:â€˜voâ€™,30:â€˜voâ€™},10:{1:â€˜voâ€™,2:â€˜voâ€™,3:â€˜voâ€™,4:â€˜voâ€™,5:â€˜voâ€™,6:â€˜voâ€™,7:â€˜voâ€™,8:â€˜voâ€™,9:â€˜voâ€™,10:â€˜voâ€™,11:â€˜voâ€™,12:â€˜voâ€™,13:â€˜voâ€™,14:â€˜voâ€™,15:â€˜voâ€™,16:â€˜voâ€™,17:â€˜voâ€™,18:â€˜voâ€™,19:â€˜voâ€™,20:â€˜voâ€™,21:â€˜voâ€™,22:â€˜voâ€™,23:â€˜voâ€™,24:â€˜voâ€™,25:â€˜voâ€™,26:â€˜voâ€™,27:â€˜voâ€™,28:â€˜voâ€™,29:â€˜voâ€™,30:â€˜roadâ€™,31:â€˜vmâ€™},11:{1:â€˜vmâ€™,2:â€˜vmâ€™,3:â€˜vmâ€™,4:â€˜holidayâ€™,5:â€˜vmâ€™,6:â€˜vmâ€™,7:â€˜vmâ€™,8:â€˜vmâ€™,9:â€˜vmâ€™,10:â€˜vmâ€™,11:â€˜vmâ€™,12:â€˜vmâ€™,13:â€˜vmâ€™,14:â€˜vmâ€™,15:â€˜vmâ€™,16:â€˜vmâ€™,17:â€˜vmâ€™,18:â€˜vmâ€™,19:â€˜vmâ€™,20:â€˜vmâ€™,21:â€˜vmâ€™,22:â€˜vmâ€™,23:â€˜vmâ€™,24:â€˜vmâ€™,25:â€˜vmâ€™,26:â€˜vmâ€™,27:â€˜vmâ€™,28:â€˜vmâ€™,29:â€˜vmâ€™,30:â€˜roadâ€™},12:{1:â€˜vmâ€™,2:â€˜vmâ€™,3:â€˜vmâ€™,4:â€˜vmâ€™,5:â€˜vmâ€™,6:â€˜vmâ€™,7:â€˜vmâ€™,8:â€˜vmâ€™,9:â€˜roadâ€™,10:â€˜voâ€™,11:â€˜voâ€™,12:â€˜voâ€™,13:â€˜voâ€™,14:â€˜voâ€™,15:â€˜voâ€™,16:â€˜voâ€™,17:â€˜voâ€™,18:â€˜voâ€™,19:â€˜voâ€™,20:â€˜voâ€™,21:â€˜voâ€™,22:â€˜voâ€™,23:â€˜voâ€™,24:â€˜voâ€™,25:â€˜voâ€™,26:â€˜voâ€™,27:â€˜voâ€™,28:â€˜voâ€™,29:â€˜voâ€™,30:â€˜voâ€™,31:â€˜voâ€™}}};}
function loadSch(){const s=localStorage.getItem(â€˜vsch2â€™);sch=s?JSON.parse(s):getDefSch();}
function saveSch(){localStorage.setItem(â€˜vsch2â€™,JSON.stringify(sch));}
function getSt(y,m,d){return sch[y]?.[m]?.[d]||null;}
function setSt(y,m,d,v){if(!sch[y])sch[y]={};if(!sch[y][m])sch[y][m]={};if(v===â€˜clearâ€™)delete sch[y][m][d];else sch[y][m][d]=v;saveSch();}

function calcDay(hrs,isHol,withB){
const base=S.hourly*hrs;
const region=base*(S.region/100);
const percent=base*(S.percent/100);
const zone=base*(S.zone/100);
const exp=base*(S.exp/100);
const vahta=S.vahta;
const vahtaEx=S.vahtaEx;
const holEx=isHol?base:0;
const bonus=withB?(S.bonus/23):0;
const gross=base+region+percent+zone+exp+vahta+vahtaEx+holEx+bonus;
const ndfl=gross*(S.ndfl/100);
return{base,region,percent,zone,exp,vahta,vahtaEx,holEx,bonus,gross,ndfl,net:gross-ndfl,hrs};
}
function calcRoad(){
const hrs=S.roadH;
const base=S.hourly*hrs;
const region=base*(S.region/100);
const percent=base*(S.percent/100);
const zone=base*(S.zone/100);
const exp=base*(S.exp/100);
const gross=base+region+percent+zone+exp;
const ndfl=gross*(S.ndfl/100);
return{base,region,percent,zone,exp,gross,ndfl,net:gross-ndfl,hrs};
}
function calcPeriod(start,end,withB){
let r={workDays:0,roadDays:0,holidays:0,hours:0,base:0,region:0,percent:0,zone:0,exp:0,vahta:0,vahtaEx:0,holEx:0,bonus:0,road:0,gross:0,ndfl:0,net:0};
const cur=new Date(start);
while(cur<=end){
const y=cur.getFullYear(),m=cur.getMonth()+1,d=cur.getDate();
const s=getSt(y,m,d);
if(s===â€˜vmâ€™){r.workDays++;const day=calcDay(S.hours,false,withB);r.hours+=day.hrs;r.base+=day.base;r.region+=day.region;r.percent+=day.percent;r.zone+=day.zone;r.exp+=day.exp;r.vahta+=day.vahta;r.vahtaEx+=day.vahtaEx;r.bonus+=day.bonus;r.gross+=day.gross;r.ndfl+=day.ndfl;r.net+=day.net;}
else if(s===â€˜holidayâ€™){r.holidays++;r.workDays++;const day=calcDay(S.hours,true,withB);r.hours+=day.hrs;r.base+=day.base;r.region+=day.region;r.percent+=day.percent;r.zone+=day.zone;r.exp+=day.exp;r.vahta+=day.vahta;r.vahtaEx+=day.vahtaEx;r.holEx+=day.holEx;r.bonus+=day.bonus;r.gross+=day.gross;r.ndfl+=day.ndfl;r.net+=day.net;}
else if(s===â€˜roadâ€™){r.roadDays++;const day=calcRoad();r.hours+=day.hrs;r.road+=day.gross;r.gross+=day.gross;r.ndfl+=day.ndfl;r.net+=day.net;}
cur.setDate(cur.getDate()+1);
}
return r;
}
function findVahta(){
const today=new Date();let start=new Date(today),end=new Date(today);
for(let i=0;i<60;i++){const c=new Date(start);c.setDate(c.getDate()-1);const s=getSt(c.getFullYear(),c.getMonth()+1,c.getDate());if(s===â€˜vmâ€™||s===â€˜roadâ€™||s===â€˜holidayâ€™)start=c;else break;}
for(let i=0;i<60;i++){const c=new Date(end);c.setDate(c.getDate()+1);const s=getSt(c.getFullYear(),c.getMonth()+1,c.getDate());if(s===â€˜vmâ€™||s===â€˜roadâ€™||s===â€˜holidayâ€™)end=c;else break;}
return{start,end};
}
function getShiftProg(){const n=new Date();const h=n.getHours()+n.getMinutes()/60+n.getSeconds()/3600;if(h<8)return 0;if(h>=20)return S.hours;let w=h-8;if(h>=14)w-=1;else if(h>=13)w=5;return Math.max(0,Math.min(w,S.hours));}
function fmt(n){return Math.round(n).toLocaleString(â€˜ru-RUâ€™);}
function fmtD(d){return d.toLocaleDateString(â€˜ru-RUâ€™,{day:â€˜numericâ€™,month:â€˜longâ€™});}
function toast(m){const t=document.getElementById(â€˜toastâ€™);t.textContent=m;t.classList.add(â€˜showâ€™);setTimeout(()=>t.classList.remove(â€˜showâ€™),2000);}

function updateLive(){
const now=new Date();const y=now.getFullYear(),m=now.getMonth()+1,d=now.getDate();
const status=getSt(y,m,d);
document.getElementById(â€˜liveTimeâ€™).textContent=now.toLocaleTimeString(â€˜ru-RUâ€™);
const dot=document.getElementById(â€˜liveDotâ€™),txt=document.getElementById(â€˜liveTxtâ€™),badge=document.getElementById(â€˜badgeâ€™);

```
if(status==='vm'||status==='holiday'){
    const prog=getShiftProg();const isHol=status==='holiday';
    if(isHol){dot.className='live-dot holiday';txt.className='live-text holiday';txt.textContent='ĞŸĞ ĞĞ—Ğ”ĞĞ˜Ğš x2';badge.textContent='x2';badge.style.background='rgba(255,215,0,.2)';badge.style.color='#ffd700';}
    else if(prog>0&&prog<S.hours){dot.className='live-dot';txt.className='live-text on';txt.textContent='Ğ¡ĞœĞ•ĞĞ Ğ˜Ğ”ĞĞ¢';badge.textContent='LIVE';badge.style.background='';badge.style.color='';}
    else if(prog>=S.hours){dot.className='live-dot off';txt.className='live-text off';txt.textContent='Ğ¡ĞœĞ•ĞĞ Ğ—ĞĞ’Ğ•Ğ Ğ¨Ğ•ĞĞ';badge.textContent='âœ“';}
    else{dot.className='live-dot';txt.className='live-text on';txt.textContent='Ğ ĞĞ‘ĞĞ§Ğ˜Ğ™ Ğ”Ğ•ĞĞ¬';badge.textContent='Ğ¡ĞœĞ•ĞĞ';}
    document.getElementById('shiftProg').style.display='block';
    document.getElementById('shiftHrs').textContent=`${prog.toFixed(1)} / ${S.hours} Ñ‡`;
    document.getElementById('shiftFill').style.width=`${(prog/S.hours)*100}%`;
}else if(status==='road'){
    dot.className='live-dot road';txt.className='live-text road';txt.textContent='Ğ”Ğ•ĞĞ¬ Ğ”ĞĞ ĞĞ“Ğ˜';badge.textContent='ğŸ›£ï¸';
    document.getElementById('shiftProg').style.display='none';
}else{
    dot.className='live-dot off';txt.className='live-text off';txt.textContent=status==='vacation'?'ĞĞ¢ĞŸĞ£Ğ¡Ğš':'Ğ’Ğ«Ğ¥ĞĞ”ĞĞĞ™';badge.textContent=status==='vacation'?'ğŸ–ï¸':'ğŸ ';
    document.getElementById('shiftProg').style.display='none';
}

const vahta=findVahta();const yesterday=new Date(now);yesterday.setDate(yesterday.getDate()-1);yesterday.setHours(23,59,59);
const pastData=calcPeriod(vahta.start,yesterday,st.withBonus);
let todayEarned=0,perSec=0;
if(status==='vm'||status==='holiday'){
    const prog=getShiftProg();const isHol=status==='holiday';
    const dayFull=calcDay(S.hours,isHol,st.withBonus);
    const rateH=dayFull.net/S.hours;const rateS=rateH/3600;
    todayEarned=rateH*prog;perSec=prog>0&&prog<S.hours?rateS:0;
}else if(status==='road'){todayEarned=calcRoad().net;}

const total=pastData.net+todayEarned;const rub=Math.floor(total);const kop=Math.round((total-rub)*100);
document.getElementById('moneyRub').textContent=fmt(rub);
document.getElementById('moneyKop').textContent='.'+kop.toString().padStart(2,'0');
document.getElementById('perSec').textContent=perSec.toFixed(4);
document.getElementById('moneyPs').style.display=perSec>0?'block':'none';

document.getElementById('qsToday').textContent=fmt(todayEarned)+'â‚½';
document.getElementById('qsHrs').textContent=Math.round(pastData.hours+(status==='vm'||status==='holiday'?getShiftProg():0))+'Ñ‡';
document.getElementById('qsDays').textContent=pastData.workDays+(status==='vm'||status==='holiday'?1:0);

const totalDays=Math.ceil((vahta.end-vahta.start)/86400000)+1;
const passedDays=Math.ceil((now-vahta.start)/86400000);
const pct=Math.min(100,(passedDays/totalDays)*100);
document.getElementById('vDates').textContent=`${fmtD(vahta.start)} â€” ${fmtD(vahta.end)}`;
document.getElementById('vPct').textContent=Math.round(pct)+'%';
document.getElementById('vFill').style.width=pct+'%';
document.getElementById('vsWork').textContent=pastData.workDays;
document.getElementById('vsRoad').textContent=pastData.roadDays;
document.getElementById('vsHol').textContent=pastData.holidays;
document.getElementById('vsLeft').textContent=Math.max(0,totalDays-passedDays);
```

}

function updateDayBk(){
const day=calcDay(S.hours,false,st.withBonus);
let h=`<div class="bk-row"><span class="bk-lbl">ĞĞºĞ»Ğ°Ğ´ (${S.hours}Ñ‡ Ã— ${S.hourly}â‚½)</span><span class="bk-val">${fmt(day.base)}â‚½</span></div> <div class="bk-row"><span class="bk-lbl">Ğ Ğ°Ğ¹Ğ¾Ğ½Ğ½Ñ‹Ğ¹ ĞºĞ¾ÑÑ„.<span class="bk-pct">${S.region}%</span></span><span class="bk-val">${fmt(day.region)}â‚½</span></div> <div class="bk-row"><span class="bk-lbl">ĞŸÑ€Ğ¾Ñ†ĞµĞ½Ñ‚Ğ½Ğ°Ñ Ğ½Ğ°Ğ´Ğ±.<span class="bk-pct">${S.percent}%</span></span><span class="bk-val">${fmt(day.percent)}â‚½</span></div> <div class="bk-row"><span class="bk-lbl">Ğ”Ğ¾Ğ¿Ğ»Ğ Ğ°ÑÑˆĞ—Ğ¾Ğ½<span class="bk-pct">${S.zone}%</span></span><span class="bk-val">${fmt(day.zone)}â‚½</span></div> <div class="bk-row"><span class="bk-lbl">Ğ—Ğ° ÑÑ‚Ğ°Ğ¶<span class="bk-pct">${S.exp}%</span></span><span class="bk-val">${fmt(day.exp)}â‚½</span></div> <div class="bk-row"><span class="bk-lbl">Ğ’Ğ°Ñ…Ñ‚Ğ¾Ğ²Ñ‹Ğ¹ Ğ¼ĞµÑ‚Ğ¾Ğ´</span><span class="bk-val">${fmt(day.vahta)}â‚½</span></div> <div class="bk-row"><span class="bk-lbl">Ğ’Ğ°Ñ…Ñ‚. ÑĞ²Ñ‹ÑˆĞµ</span><span class="bk-val">${fmt(day.vahtaEx)}â‚½</span></div>`;
if(st.withBonus)h+=`<div class="bk-row hl"><span class="bk-lbl">ğŸ ĞŸÑ€ĞµĞ¼Ğ¸Ñ</span><span class="bk-val" style="color:var(--gold)">${fmt(day.bonus)}â‚½</span></div>`;
h+=`<div class="bk-row"><span class="bk-lbl">ĞĞ”Ğ¤Ğ›<span class="bk-pct">${S.ndfl}%</span></span><span class="bk-val" style="color:var(--red)">-${fmt(day.ndfl)}â‚½</span></div> <div class="bk-row total"><span class="bk-lbl">ğŸ’µ ĞĞ° Ñ€ÑƒĞºĞ¸</span><span class="bk-val">${fmt(day.net)}â‚½</span></div>`;
document.getElementById(â€˜dayBkâ€™).innerHTML=h;
}

function renderCal(){
const y=st.calY,m=st.calM;document.getElementById(â€˜calTitleâ€™).textContent=`${MO[m]} ${y}`;
const first=new Date(y,m,1),last=new Date(y,m+1,0),startWd=(first.getDay()+6)%7,today=new Date();
let h=â€™â€™;for(let i=0;i<startWd;i++)h+=â€™<div class="cal-day empty"></div>â€™;
for(let d=1;d<=last.getDate();d++){
const s=getSt(y,m+1,d);let cls=â€˜cal-dayâ€™,lbl=â€™â€™;
if(s){cls+=â€™ â€˜+s;lbl=LB[s]||â€™â€™;}
if(d===today.getDate()&&m===today.getMonth()&&y===today.getFullYear())cls+=â€™ todayâ€™;
if(new Date(y,m,d)<new Date(today.getFullYear(),today.getMonth(),today.getDate()))cls+=â€™ pastâ€™;
h+=`<div class="${cls}" data-d="${d}"><span class="cal-day-num">${d}</span>${lbl?`<span class="cal-day-lbl">${lbl}</span>`:''}</div>`;
}
document.getElementById(â€˜calGridâ€™).innerHTML=h;
document.querySelectorAll(â€™.cal-day:not(.empty)â€™).forEach(el=>el.addEventListener(â€˜clickâ€™,()=>openEdit(parseInt(el.dataset.d))));
updatePeriodStats();
}

function updatePeriodStats(){
let start,end;const now=new Date();
switch(st.period){
caseâ€™currentâ€™:const v=findVahta();start=v.start;end=v.end;break;
caseâ€™monthâ€™:start=new Date(now.getFullYear(),now.getMonth(),1);end=new Date(now.getFullYear(),now.getMonth()+1,0);break;
caseâ€™yearâ€™:start=new Date(2026,0,1);end=new Date(2026,11,31);break;
}
const data=calcPeriod(start,end,st.withBonus);
document.getElementById(â€˜psDaysâ€™).textContent=data.workDays;
document.getElementById(â€˜psHrsâ€™).textContent=Math.round(data.hours);
document.getElementById(â€˜psNetâ€™).textContent=fmt(data.net)+â€˜â‚½â€™;
}

function renderHist(){
const html=[];const today=new Date();
for(let i=0;i<60;i++){
const d=new Date(today);d.setDate(d.getDate()-i);
const s=getSt(d.getFullYear(),d.getMonth()+1,d.getDate());
if(s===â€˜vmâ€™){const day=calcDay(S.hours,false,st.withBonus);html.push(`<div class="hist-item"><div><div class="hist-date">${d.toLocaleDateString('ru-RU',{day:'numeric',month:'short',weekday:'short'})}</div><div class="hist-meta">${S.hours}Ñ‡ â€¢ Ğ’Ğ°Ñ…Ñ‚Ğ°</div></div><span class="hist-amt">+${fmt(day.net)}â‚½</span></div>`);}
else if(s===â€˜holidayâ€™){const day=calcDay(S.hours,true,st.withBonus);html.push(`<div class="hist-item"><div><div class="hist-date">${d.toLocaleDateString('ru-RU',{day:'numeric',month:'short',weekday:'short'})}</div><div class="hist-meta">${S.hours}Ñ‡ â€¢ ĞŸÑ€Ğ°Ğ·Ğ´Ğ½Ğ¸Ğº</div></div><span class="hist-amt holiday">+${fmt(day.net)}â‚½</span></div>`);}
else if(s===â€˜roadâ€™){const day=calcRoad();html.push(`<div class="hist-item"><div><div class="hist-date">${d.toLocaleDateString('ru-RU',{day:'numeric',month:'short',weekday:'short'})}</div><div class="hist-meta">${S.roadH}Ñ‡ â€¢ Ğ”Ğ¾Ñ€Ğ¾Ğ³Ğ°</div></div><span class="hist-amt road">+${fmt(day.net)}â‚½</span></div>`);}
}
document.getElementById(â€˜histListâ€™).innerHTML=html.length?html.join(â€™â€™):â€™<p style="color:var(--muted);text-align:center">ĞĞµÑ‚ Ğ·Ğ°Ğ¿Ğ¸ÑĞµĞ¹</p>â€™;
}

function openEdit(day){
st.selDay={y:st.calY,m:st.calM+1,d:day};
document.getElementById(â€˜editDateâ€™).textContent=new Date(st.calY,st.calM,day).toLocaleDateString(â€˜ru-RUâ€™,{day:â€˜numericâ€™,month:â€˜longâ€™,year:â€˜numericâ€™,weekday:â€˜longâ€™});
document.getElementById(â€˜editOvâ€™).classList.add(â€˜showâ€™);
}

function loadSet(){
const s=localStorage.getItem(â€˜vset2â€™);if(s)S={â€¦DEF,â€¦JSON.parse(s)};
document.getElementById(â€˜sHourlyâ€™).value=S.hourly;document.getElementById(â€˜sHoursâ€™).value=S.hours;
document.getElementById(â€˜sVahtaâ€™).value=S.vahta;document.getElementById(â€˜sVahtaExâ€™).value=S.vahtaEx;
document.getElementById(â€˜sRegionâ€™).value=S.region;document.getElementById(â€˜sPercentâ€™).value=S.percent;
document.getElementById(â€˜sZoneâ€™).value=S.zone;document.getElementById(â€˜sExpâ€™).value=S.exp;
document.getElementById(â€˜sNdflâ€™).value=S.ndfl;document.getElementById(â€˜sRoadHâ€™).value=S.roadH;
document.getElementById(â€˜sBonusâ€™).value=S.bonus;
}

function saveSet(){
S.hourly=parseFloat(document.getElementById(â€˜sHourlyâ€™).value)||DEF.hourly;
S.hours=parseFloat(document.getElementById(â€˜sHoursâ€™).value)||DEF.hours;
S.vahta=parseFloat(document.getElementById(â€˜sVahtaâ€™).value)||DEF.vahta;
S.vahtaEx=parseFloat(document.getElementById(â€˜sVahtaExâ€™).value)||DEF.vahtaEx;
S.region=parseFloat(document.getElementById(â€˜sRegionâ€™).value)||DEF.region;
S.percent=parseFloat(document.getElementById(â€˜sPercentâ€™).value)||DEF.percent;
S.zone=parseFloat(document.getElementById(â€˜sZoneâ€™).value)||DEF.zone;
S.exp=parseFloat(document.getElementById(â€˜sExpâ€™).value)||DEF.exp;
S.ndfl=parseFloat(document.getElementById(â€˜sNdflâ€™).value)||DEF.ndfl;
S.roadH=parseFloat(document.getElementById(â€˜sRoadHâ€™).value)||DEF.roadH;
S.bonus=parseFloat(document.getElementById(â€˜sBonusâ€™).value)||DEF.bonus;
localStorage.setItem(â€˜vset2â€™,JSON.stringify(S));toast(â€˜âœ“ Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¾â€™);updateLive();updateDayBk();
}

document.querySelectorAll(â€™.nav-itemâ€™).forEach(i=>i.addEventListener(â€˜clickâ€™,function(){
const t=this.dataset.t;document.querySelectorAll(â€™.nav-itemâ€™).forEach(n=>n.classList.remove(â€˜activeâ€™));
document.querySelectorAll(â€™.tab-contentâ€™).forEach(c=>c.classList.remove(â€˜activeâ€™));
this.classList.add(â€˜activeâ€™);document.getElementById(â€˜tab-â€™+t).classList.add(â€˜activeâ€™);
if(t===â€˜calâ€™)renderCal();if(t===â€˜histâ€™)renderHist();
}));
document.getElementById(â€˜calPrevâ€™).addEventListener(â€˜clickâ€™,()=>{st.calMâ€“;if(st.calM<0){st.calM=11;st.calYâ€“;}if(st.calY<2025){st.calY=2025;st.calM=0;}renderCal();});
document.getElementById(â€˜calNextâ€™).addEventListener(â€˜clickâ€™,()=>{st.calM++;if(st.calM>11){st.calM=0;st.calY++;}if(st.calY>2027){st.calY=2027;st.calM=11;}renderCal();});
document.querySelectorAll(â€™.period-btnâ€™).forEach(b=>b.addEventListener(â€˜clickâ€™,function(){st.period=this.dataset.p;document.querySelectorAll(â€™.period-btnâ€™).forEach(x=>x.classList.remove(â€˜activeâ€™));this.classList.add(â€˜activeâ€™);updatePeriodStats();}));
document.getElementById(â€˜tgBonusâ€™).addEventListener(â€˜clickâ€™,function(){st.withBonus=true;this.classList.add(â€˜onâ€™);document.getElementById(â€˜tgNoBonusâ€™).classList.remove(â€˜onâ€™);updateDayBk();updateLive();});
document.getElementById(â€˜tgNoBonusâ€™).addEventListener(â€˜clickâ€™,function(){st.withBonus=false;this.classList.add(â€˜onâ€™);document.getElementById(â€˜tgBonusâ€™).classList.remove(â€˜onâ€™);updateDayBk();updateLive();});
document.getElementById(â€˜editCloseâ€™).addEventListener(â€˜clickâ€™,()=>document.getElementById(â€˜editOvâ€™).classList.remove(â€˜showâ€™));
document.getElementById(â€˜editOvâ€™).addEventListener(â€˜clickâ€™,e=>{if(e.target.id===â€˜editOvâ€™)document.getElementById(â€˜editOvâ€™).classList.remove(â€˜showâ€™);});
document.querySelectorAll(â€™.edit-btnâ€™).forEach(b=>b.addEventListener(â€˜clickâ€™,function(){if(!st.selDay)return;setSt(st.selDay.y,st.selDay.m,st.selDay.d,this.dataset.s);document.getElementById(â€˜editOvâ€™).classList.remove(â€˜showâ€™);renderCal();updateLive();toast(â€˜âœ“ ĞĞ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¾â€™);}));
document.getElementById(â€˜saveBtnâ€™).addEventListener(â€˜clickâ€™,saveSet);

function init(){loadSch();loadSet();const now=new Date();st.calY=now.getFullYear();st.calM=now.getMonth();updateLive();updateDayBk();renderCal();setInterval(updateLive,1000);}
document.addEventListener(â€˜DOMContentLoadedâ€™,init);
</script>

</body>
</html>
